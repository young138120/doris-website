"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["402987"],{41490:function(e,n,r){r.r(n),r.d(n,{metadata:()=>o,contentTitle:()=>t,default:()=>u,assets:()=>d,toc:()=>c,frontMatter:()=>s});var o=JSON.parse('{"id":"admin-manual/resource-admin/use-workload-cpu-limit","title":"\u4F7F\u7528Workload Group\u7BA1\u7406CPU\u8D44\u6E90","description":"\x3c!--","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-2.1/admin-manual/resource-admin/use-workload-cpu-limit.md","sourceDirName":"admin-manual/resource-admin","slug":"/admin-manual/resource-admin/use-workload-cpu-limit","permalink":"/zh-CN/docs/admin-manual/resource-admin/use-workload-cpu-limit","draft":false,"unlisted":false,"tags":[],"version":"2.1","frontMatter":{"title":"\u4F7F\u7528Workload Group\u7BA1\u7406CPU\u8D44\u6E90","language":"zh-CN"},"sidebar":"docs","previous":{"title":"\u4F7F\u7528Workload Group\u7BA1\u7406\u5185\u5B58\u8D44\u6E90","permalink":"/zh-CN/docs/admin-manual/resource-admin/use-workload-mem-limit"},"next":{"title":"\u4F7F\u7528Workload Group\u7BA1\u7406\u672C\u5730IO","permalink":"/zh-CN/docs/admin-manual/resource-admin/use-workload-local-io-limit"}}'),i=r("785893"),l=r("250065");let s={title:"\u4F7F\u7528Workload Group\u7BA1\u7406CPU\u8D44\u6E90",language:"zh-CN"},t=void 0,d={},c=[{value:"CPU\u786C\u9650\u6D4B\u8BD5",id:"cpu\u786C\u9650\u6D4B\u8BD5",level:2},{value:"\u6D4B\u8BD5\u73AF\u5883",id:"\u6D4B\u8BD5\u73AF\u5883",level:3},{value:"\u6D4B\u8BD5",id:"\u6D4B\u8BD5",level:3},{value:"\u6CE8\u610F\u4E8B\u9879",id:"\u6CE8\u610F\u4E8B\u9879",level:2}];function a(e){let n={code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,l.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Doris \u7684\u8D1F\u8F7D\u5927\u4F53\u53EF\u4EE5\u5206\u4E3A\u4E09\u7C7B\uFF1A"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u6838\u5FC3\u62A5\u8868\u67E5\u8BE2\uFF0C\u901A\u5E38\u7ED9\u516C\u53F8\u9AD8\u5C42\u67E5\u770B\u62A5\u8868\u4F7F\u7528\uFF0C\u8D1F\u8F7D\u4E0D\u4E00\u5B9A\u5F88\u9AD8\uFF0C\u4F46\u662F\u5BF9\u53EF\u7528\u6027\u8981\u6C42\u8F83\u9AD8\uFF0C\u8FD9\u7C7B\u67E5\u8BE2\u53EF\u4EE5\u5212\u5206\u5230\u4E00\u4E2A\u5206\u7EC4\uFF0C\u914D\u7F6E\u8F83\u9AD8\u4F18\u5148\u7EA7\u7684\u8F6F\u9650\uFF0C\u4FDD\u8BC1CPU\u8D44\u6E90\u4E0D\u591F\u65F6\u53EF\u4EE5\u83B7\u5F97\u66F4\u591A\u7684CPU\u8D44\u6E90\u3002"}),"\n",(0,i.jsx)(n.li,{children:"Adhoc\u7C7B\u67E5\u8BE2\uFF0C\u8FD9\u7C7B\u67E5\u8BE2\u901A\u5E38\u504F\u63A2\u7D22\u5206\u6790\uFF0CSQL\u6BD4\u8F83\u968F\u673A\uFF0C\u5177\u4F53\u7684\u8D44\u6E90\u7528\u91CF\u4E5F\u6BD4\u8F83\u672A\u77E5\uFF0C\u4F18\u5148\u7EA7\u901A\u5E38\u4E0D\u9AD8\u3002\u56E0\u6B64\u53EF\u4EE5\u4F7F\u7528CPU\u786C\u9650\u8FDB\u884C\u7BA1\u7406\uFF0C\u5E76\u914D\u7F6E\u8F83\u4F4E\u7684\u503C\uFF0C\u907F\u514D\u5360\u7528\u8FC7\u591ACPU\u8D44\u6E90\u964D\u4F4E\u96C6\u7FA4\u53EF\u7528\u6027\u3002"}),"\n",(0,i.jsx)(n.li,{children:"ETL\u7C7B\u67E5\u8BE2\uFF0C\u8FD9\u7C7B\u67E5\u8BE2\u7684SQL\u6BD4\u8F83\u56FA\u5B9A\uFF0C\u8D44\u6E90\u7528\u91CF\u901A\u5E38\u4E5F\u6BD4\u8F83\u7A33\u5B9A\uFF0C\u5076\u5C14\u4F1A\u51FA\u73B0\u4E0A\u6E38\u6570\u636E\u91CF\u589E\u957F\u5BFC\u81F4\u8D44\u6E90\u7528\u91CF\u66B4\u6DA8\u7684\u60C5\u51B5\uFF0C\u56E0\u6B64\u53EF\u4EE5\u4F7F\u7528CPU\u786C\u9650\u8FDB\u884C\u914D\u7F6E\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u4E0D\u540C\u7684\u8D1F\u8F7D\u5BF9CPU\u7684\u6D88\u8017\u4E0D\u4E00\u6837\uFF0C\u7528\u6237\u5BF9\u54CD\u5E94\u5EF6\u65F6\u7684\u9700\u6C42\u4E5F\u4E0D\u4E00\u6837\u3002\u5F53BE\u7684CPU \u88AB\u7528\u7684\u5F88\u6EE1\u65F6\uFF0C\u53EF\u7528\u6027\u4F1A\u53D8\u5DEE\uFF0C\u54CD\u5E94\u5EF6\u65F6\u4F1A\u53D8\u9AD8\u3002\u6BD4\u5982\u53EF\u80FD\u4E00\u4E2AAdhoc\u7684\u5206\u6790\u7C7B\u67E5\u8BE2\u628A\u6574\u4E2A\u96C6\u7FA4\u7684CPU\u6253\u6EE1\uFF0C\u5BFC\u81F4\u6838\u5FC3\u62A5\u8868\u7684\u5EF6\u65F6\u53D8\u5927\uFF0C\u5F71\u54CD\u5230\u4E86SLA\u3002\u6240\u4EE5\u9700\u8981CPU \u9694\u79BB\u673A\u5236\u6765\u5BF9\u4E0D\u540C\u7684\u4E1A\u52A1\u8FDB\u884C\u9694\u79BB\uFF0C\u4FDD\u969C\u96C6\u7FA4\u7684\u53EF\u7528\u6027\u548CSLA\u3002\nWorkload Group\u652F\u6301CPU\u7684\u8F6F\u9650\u548C\u786C\u9650\uFF0C\u76EE\u524D\u6BD4\u8F83\u63A8\u8350\u5728\u7EBF\u4E0A\u73AF\u5883\u628AWorkload Group\u914D\u7F6E\u6210\u786C\u9650\u3002\u539F\u56E0\u662FCPU\u7684\u8F6F\u9650\u901A\u5E38\u5728CPU\u88AB\u6253\u6EE1\u65F6\u624D\u80FD\u4F53\u73B0\u51FA\u4F18\u5148\u7EA7\u7684\u4F5C\u7528\uFF0C\u4F46\u662F\u5728CPU\u88AB\u7528\u6EE1\u65F6\uFF0CDoris\u7684\u5185\u90E8\u7EC4\u4EF6\uFF08\u4F8B\u5982rpc\u7EC4\u4EF6\uFF09\u4EE5\u53CA\u64CD\u4F5C\u7CFB\u7EDF\u53EF\u7528\u7684CPU\u4F1A\u51CF\u5C11\uFF0C\u6B64\u65F6\u96C6\u7FA4\u6574\u4F53\u7684\u53EF\u7528\u6027\u662F\u4E0B\u964D\u6BD4\u8F83\u4E25\u91CD\u7684\uFF0C\u56E0\u6B64\u751F\u4EA7\u73AF\u5883\u901A\u5E38\u9700\u8981\u907F\u514DCPU\u8D44\u6E90\u88AB\u6253\u6EE1\u7684\u60C5\u51B5\uFF0C\u5F53\u7136\u5176\u4ED6\u8D44\u6E90\u4E5F\u4E00\u6837\uFF0C\u5185\u5B58\u8D44\u6E90\u540C\u7406\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"cpu\u786C\u9650\u6D4B\u8BD5",children:"CPU\u786C\u9650\u6D4B\u8BD5"}),"\n",(0,i.jsx)(n.h3,{id:"\u6D4B\u8BD5\u73AF\u5883",children:"\u6D4B\u8BD5\u73AF\u5883"}),"\n",(0,i.jsx)(n.p,{children:"1FE\uFF0C1BE\uFF0C96\u6838\u673A\u5668\u3002\n\u6570\u636E\u96C6\u4E3Aclickbench\uFF0C\u6D4B\u8BD5sql\u4E3Aq29\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"\u6D4B\u8BD5",children:"\u6D4B\u8BD5"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u4F7F\u7528jmeter\u53D1\u8D773\u5E76\u53D1\u67E5\u8BE2\uFF0C\u628ABE\u8FDB\u7A0B\u7684CPU\u4F7F\u7528\u538B\u5230\u6BD4\u8F83\u9AD8\u7684\u4F7F\u7528\u7387\uFF0C\u8FD9\u91CC\u6D4B\u8BD5\u7684\u673A\u5668\u662F96\u6838\uFF0C\u4F7F\u7528top\u547D\u4EE4\u770B\u5230BE\u8FDB\u7A0BCPU\u4F7F\u7528\u7387\u4E3A7600%\u7684\u542B\u4E49\u662F\u8BE5\u8FDB\u7A0B\u76EE\u524D\u4F7F\u7528\u4E2D\u7684\u6838\u6570\u662F76\u4E2A\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"use workload group cpu",src:r(53982).Z+"",width:"962",height:"146"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"\u4FEE\u6539\u4F7F\u7528\u4E2D\u7684Workload Group\u7684CPU\u786C\u9650\u4E3A10%\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"alter workload group g2 properties('cpu_hard_limit'='10%');\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"\u96C6\u7FA4\u5F00\u542F\u786C\u9650\u6A21\u5F0F\uFF0C\u6B64\u65F6\u96C6\u7FA4\u4E2D\u6240\u6709Group\u90FD\u4F1A\u5207\u6362\u4E3A\u786C\u9650\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'ADMIN SET FRONTEND CONFIG ("enable_cpu_hard_limit" = "true");\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:"\u91CD\u65B0\u538B\u6D4B\u67E5\u8BE2\u8D1F\u8F7D\uFF0C\u53EF\u4EE5\u770B\u5230\u5F53\u524D\u8FDB\u7A0B\u53EA\u80FD\u4F7F\u75289\u523010\u4E2A\u6838\uFF0C\u5360\u603B\u6838\u6570\u768410%\u5DE6\u53F3\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"use workload group cpu",src:r(665930).Z+"",width:"1138",height:"180"})}),"\n",(0,i.jsx)(n.p,{children:"\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u8FD9\u91CC\u7684\u6D4B\u8BD5\u6700\u597D\u4F7F\u7528\u67E5\u8BE2\u8D1F\u8F7D\u4F1A\u6BD4\u8F83\u80FD\u4F53\u73B0\u51FA\u6548\u679C\uFF0C\u56E0\u4E3A\u5982\u679C\u662F\u9AD8\u541E\u5410\u5BFC\u5165\u7684\u8BDD\uFF0C\u53EF\u80FD\u4F1A\u89E6\u53D1Compaction\uFF0C\u4F7F\u5F97\u5B9E\u9645\u89C2\u6D4B\u7684\u503C\u8981\u6BD4Workload Group\u914D\u7F6E\u7684\u503C\u5927\u3002\u800CCompaction\u7684\u8D1F\u8F7D\u76EE\u524D\u662F\u6CA1\u6709\u5F52\u5165Workload Group\u7684\u7BA1\u7406\u7684\u3002"}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsx)(n.li,{children:"\u9664\u4E86\u4F7F\u7528Linux \u7684\u7CFB\u7EDF\u547D\u4EE4\u5916\uFF0C\u8FD8\u53EF\u4EE5\u901A\u8FC7\u4F7F\u7528Doris\u7684\u7CFB\u7EDF\u8868\u89C2\u5BDFGroup\u76EE\u524D\u7684CPU\u4F7F\u7528\u4E3A10%\u5DE6\u53F3\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"mysql [information_schema]>select CPU_USAGE_PERCENT from workload_group_resource_usage where WORKLOAD_GROUP_ID=11201;\n+-------------------+\n| CPU_USAGE_PERCENT |\n+-------------------+\n|              9.57 |\n+-------------------+\n1 row in set (0.02 sec)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u6CE8\u610F\u4E8B\u9879",children:"\u6CE8\u610F\u4E8B\u9879"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u5728\u5B9E\u9645\u914D\u7F6E\u7684\u65F6\u5019\uFF0C\u6240\u6709Group\u7684CPU\u7D2F\u52A0\u503C\u6700\u597D\u4E0D\u8981\u6B63\u597D\u7B49\u4E8E100%\uFF0C\u8FD9\u4E3B\u8981\u662F\u4E3A\u4E86\u4FDD\u8BC1\u4F4E\u5EF6\u8FDF\u573A\u666F\u7684\u53EF\u7528\u6027\u3002\u56E0\u4E3A\u9700\u8981\u8BA9\u51FA\u4E00\u90E8\u5206\u8D44\u6E90\u7ED9\u5176\u4ED6\u7EC4\u4EF6\u4F7F\u7528\u3002\u5F53\u7136\u5982\u679C\u5BF9\u5EF6\u8FDF\u4E0D\u662F\u5F88\u654F\u611F\u7684\u573A\u666F\uFF0C\u671F\u671B\u6700\u9AD8\u7684\u8D44\u6E90\u5229\u7528\u7387\uFF0C\u90A3\u4E48\u53EF\u4EE5\u8003\u8651\u6240\u6709Group\u7684CPU\u7D2F\u52A0\u503C\u914D\u7F6E\u7B49\u4E8E100%\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u76EE\u524DFE\u5411BE\u540C\u6B65Workload Group\u5143\u6570\u636E\u7684\u65F6\u95F4\u95F4\u9694\u4E3A30\u79D2\uFF0C\u56E0\u6B64\u5BF9\u4E8EWorkload Group\u7684\u53D8\u66F4\u6700\u5927\u9700\u8981\u7B49\u5F8530\u79D2\u624D\u80FD\u751F\u6548\u3002"}),"\n"]})]})}function u(e={}){let{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},53982:function(e,n,r){r.d(n,{Z:function(){return o}});let o=r.p+"assets/images/use_wg_cpu_1-6211d7170720ad508590d94cf72724e3.png"},665930:function(e,n,r){r.d(n,{Z:function(){return o}});let o=r.p+"assets/images/use_wg_cpu_2-03419ba3e02b1980179a1af557d41d1c.png"},250065:function(e,n,r){r.d(n,{Z:function(){return t},a:function(){return s}});var o=r(667294);let i={},l=o.createContext(i);function s(e){let n=o.useContext(l);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(l.Provider,{value:n},e.children)}}}]);