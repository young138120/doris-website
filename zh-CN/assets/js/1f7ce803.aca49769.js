"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["184259"],{829426:function(e,n,r){r.r(n),r.d(n,{metadata:()=>s,contentTitle:()=>d,default:()=>h,assets:()=>o,toc:()=>c,frontMatter:()=>a});var s=JSON.parse('{"id":"lakehouse/multi-catalog/hive","title":"Hive","description":"\x3c!--","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-1.2/lakehouse/multi-catalog/hive.md","sourceDirName":"lakehouse/multi-catalog","slug":"/lakehouse/multi-catalog/hive","permalink":"/zh-CN/docs/1.2/lakehouse/multi-catalog/hive","draft":false,"unlisted":false,"tags":[],"version":"1.2","frontMatter":{"title":"Hive","language":"zh-CN"},"sidebar":"docs","previous":{"title":"\u591A\u6E90\u6570\u636E\u76EE\u5F55","permalink":"/zh-CN/docs/1.2/lakehouse/multi-catalog/"},"next":{"title":"Iceberg","permalink":"/zh-CN/docs/1.2/lakehouse/multi-catalog/iceberg"}}'),i=r("785893"),l=r("250065");let a={title:"Hive",language:"zh-CN"},d="Hive",o={},c=[{value:"\u4F7F\u7528\u987B\u77E5",id:"\u4F7F\u7528\u987B\u77E5",level:2},{value:"\u521B\u5EFA Catalog",id:"\u521B\u5EFA-catalog",level:2},{value:"Hive \u7248\u672C",id:"hive-\u7248\u672C",level:3},{value:"\u5217\u7C7B\u578B\u6620\u5C04",id:"\u5217\u7C7B\u578B\u6620\u5C04",level:2},{value:"\u4F7F\u7528Ranger\u8FDB\u884C\u6743\u9650\u6821\u9A8C",id:"\u4F7F\u7528ranger\u8FDB\u884C\u6743\u9650\u6821\u9A8C",level:2},{value:"\u73AF\u5883\u914D\u7F6E",id:"\u73AF\u5883\u914D\u7F6E",level:3},{value:"\u6700\u4F73\u5B9E\u8DF5",id:"\u6700\u4F73\u5B9E\u8DF5",level:3}];function t(e){let n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",version:"version",...(0,l.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"hive",children:"Hive"})}),"\n",(0,i.jsx)(n.p,{children:"\u901A\u8FC7\u8FDE\u63A5 Hive Metastore\uFF0C\u6216\u8005\u517C\u5BB9 Hive Metatore \u7684\u5143\u6570\u636E\u670D\u52A1\uFF0CDoris \u53EF\u4EE5\u81EA\u52A8\u83B7\u53D6 Hive \u7684\u5E93\u8868\u4FE1\u606F\uFF0C\u5E76\u8FDB\u884C\u6570\u636E\u67E5\u8BE2\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u9664\u4E86 Hive \u5916\uFF0C\u5F88\u591A\u5176\u4ED6\u7CFB\u7EDF\u4E5F\u4F1A\u4F7F\u7528 Hive Metastore \u5B58\u50A8\u5143\u6570\u636E\u3002\u6240\u4EE5\u901A\u8FC7 Hive Catalog\uFF0C\u6211\u4EEC\u4E0D\u4EC5\u80FD\u8BBF\u95EE Hive\uFF0C\u4E5F\u80FD\u8BBF\u95EE\u4F7F\u7528 Hive Metastore \u4F5C\u4E3A\u5143\u6570\u636E\u5B58\u50A8\u7684\u7CFB\u7EDF\u3002\u5982 Iceberg\u3001Hudi \u7B49\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u4F7F\u7528\u987B\u77E5",children:"\u4F7F\u7528\u987B\u77E5"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\u5C06 core-site.xml\uFF0Chdfs-site.xml \u548C hive-site.xml  \u653E\u5230 FE \u548C BE \u7684 conf \u76EE\u5F55\u4E0B\u3002\u4F18\u5148\u8BFB\u53D6 conf \u76EE\u5F55\u4E0B\u7684 hadoop \u914D\u7F6E\u6587\u4EF6\uFF0C\u518D\u8BFB\u53D6\u73AF\u5883\u53D8\u91CF ",(0,i.jsx)(n.code,{children:"HADOOP_CONF_DIR"})," \u7684\u76F8\u5173\u914D\u7F6E\u6587\u4EF6\u3002"]}),"\n",(0,i.jsx)(n.li,{children:"hive \u652F\u6301 1/2/3 \u7248\u672C\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u652F\u6301 Managed Table \u548C External Table\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u53EF\u4EE5\u8BC6\u522B Hive Metastore \u4E2D\u5B58\u50A8\u7684 hive\u3001iceberg\u3001hudi \u5143\u6570\u636E\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u652F\u6301\u6570\u636E\u5B58\u50A8\u5728 Juicefs \u4E0A\u7684 hive \u8868\uFF0C\u7528\u6CD5\u5982\u4E0B\uFF08\u9700\u8981\u628Ajuicefs-hadoop-x.x.x.jar\u653E\u5728 fe/lib/ \u548C apache_hdfs_broker/lib/ \u4E0B\uFF09\u3002"}),"\n",(0,i.jsxs)(n.li,{children:["\u652F\u6301\u6570\u636E\u5B58\u50A8\u5728 CHDFS \u4E0A\u7684 hive \u8868\u3002\u9700\u914D\u7F6E\u73AF\u5883\uFF1A\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u628Achdfs_hadoop_plugin_network-x.x.jar \u653E\u5728 fe/lib/ \u548C apache_hdfs_broker/lib/ \u4E0B"}),"\n",(0,i.jsx)(n.li,{children:"\u5C06 hive \u6240\u5728 Hadoop \u96C6\u7FA4\u7684 core-site.xml \u548C hdfs-site.xml \u590D\u5236\u5230 fe/conf/ \u548C apache_hdfs_broker/conf \u76EE\u5F55\u4E0B"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.version,{since:"dev",children:["\n",(0,i.jsxs)(n.ol,{start:"7",children:["\n",(0,i.jsxs)(n.li,{children:["\u652F\u6301\u6570\u636E\u5B58\u5728\u5728 GooseFS(GFS) \u4E0A\u7684 hive\u3001iceberg\u8868\u3002\u9700\u914D\u7F6E\u73AF\u5883\uFF1A\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u628A goosefs-x.x.x-client.jar \u653E\u5728 fe/lib/ \u548C apache_hdfs_broker/lib/ \u4E0B"}),"\n",(0,i.jsx)(n.li,{children:"\u521B\u5EFA catalog \u65F6\u589E\u52A0\u5C5E\u6027\uFF1A'fs.AbstractFileSystem.gfs.impl' = 'com.qcloud.cos.goosefs.hadoop.GooseFileSystem'\uFF0C 'fs.gfs.impl' = 'com.qcloud.cos.goosefs.hadoop.FileSystem'"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"8",children:["\n",(0,i.jsx)(n.li,{children:"\u5982\u679C Hadoop \u8282\u70B9\u914D\u7F6E\u4E86 hostname\uFF0C\u8BF7\u786E\u4FDD\u6DFB\u52A0\u5BF9\u5E94\u7684\u6620\u5C04\u5173\u7CFB\u5230 /etc/hosts \u6587\u4EF6\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u521B\u5EFA-catalog",children:"\u521B\u5EFA Catalog"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hive PROPERTIES (\n    'type'='hms',\n    'hive.metastore.uris' = 'thrift://172.21.0.1:7004',\n    'hadoop.username' = 'hive',\n    'dfs.nameservices'='your-nameservice',\n    'dfs.ha.namenodes.your-nameservice'='nn1,nn2',\n    'dfs.namenode.rpc-address.your-nameservice.nn1'='172.21.0.2:4007',\n    'dfs.namenode.rpc-address.your-nameservice.nn2'='172.21.0.3:4007',\n    'dfs.client.failover.proxy.provider.your-nameservice'='org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider'\n);\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u9664\u4E86 ",(0,i.jsx)(n.code,{children:"type"})," \u548C ",(0,i.jsx)(n.code,{children:"hive.metastore.uris"})," \u4E24\u4E2A\u5FC5\u987B\u53C2\u6570\u5916\uFF0C\u8FD8\u53EF\u4EE5\u901A\u8FC7\u66F4\u591A\u53C2\u6570\u6765\u4F20\u9012\u8FDE\u63A5\u6240\u9700\u8981\u7684\u4FE1\u606F\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u63D0\u4F9B HDFS HA \u4FE1\u606F\uFF0C\u793A\u4F8B\u5982\u4E0B\uFF1A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hive PROPERTIES (\n    'type'='hms',\n    'hive.metastore.uris' = 'thrift://172.21.0.1:7004',\n    'hadoop.username' = 'hive',\n    'dfs.nameservices'='your-nameservice',\n    'dfs.ha.namenodes.your-nameservice'='nn1,nn2',\n    'dfs.namenode.rpc-address.your-nameservice.nn1'='172.21.0.2:4007',\n    'dfs.namenode.rpc-address.your-nameservice.nn2'='172.21.0.3:4007',\n    'dfs.client.failover.proxy.provider.your-nameservice'='org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider'\n);\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u540C\u65F6\u63D0\u4F9B HDFS HA \u4FE1\u606F\u548C Kerberos \u8BA4\u8BC1\u4FE1\u606F\uFF0C\u793A\u4F8B\u5982\u4E0B\uFF1A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hive PROPERTIES (\n    'type'='hms',\n    'hive.metastore.uris' = 'thrift://172.21.0.1:7004',\n    'hive.metastore.sasl.enabled' = 'true',\n    'hive.metastore.kerberos.principal' = 'your-hms-principal',\n    'dfs.nameservices'='your-nameservice',\n    'dfs.namenode.rpc-address.your-nameservice.nn1'='172.21.0.2:4007',\n    'dfs.namenode.rpc-address.your-nameservice.nn2'='172.21.0.3:4007',\n    'dfs.client.failover.proxy.provider.your-nameservice'='org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider',\n    'hadoop.security.authentication' = 'kerberos',\n    'hadoop.kerberos.keytab' = '/your-keytab-filepath/your.keytab',   \n    'hadoop.kerberos.principal' = 'your-principal@YOUR.COM',\n    'yarn.resourcemanager.principal' = 'your-rm-principal'\n);\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u8BF7\u5728\u6240\u6709\u7684 ",(0,i.jsx)(n.code,{children:"BE"}),"\u3001",(0,i.jsx)(n.code,{children:"FE"})," \u8282\u70B9\u4E0B\u653E\u7F6E ",(0,i.jsx)(n.code,{children:"krb5.conf"})," \u6587\u4EF6\u548C ",(0,i.jsx)(n.code,{children:"keytab"})," \u8BA4\u8BC1\u6587\u4EF6\uFF0C",(0,i.jsx)(n.code,{children:"keytab"})," \u8BA4\u8BC1\u6587\u4EF6\u8DEF\u5F84\u548C\u914D\u7F6E\u4FDD\u6301\u4E00\u81F4\uFF0C",(0,i.jsx)(n.code,{children:"krb5.conf"})," \u6587\u4EF6\u9ED8\u8BA4\u653E\u7F6E\u5728 ",(0,i.jsx)(n.code,{children:"/etc/krb5.conf"})," \u8DEF\u5F84\u3002\n",(0,i.jsx)(n.code,{children:"hive.metastore.kerberos.principal"})," \u7684\u503C\u9700\u8981\u548C\u6240\u8FDE\u63A5\u7684 hive metastore \u7684\u540C\u540D\u5C5E\u6027\u4FDD\u6301\u4E00\u81F4\uFF0C\u53EF\u4ECE ",(0,i.jsx)(n.code,{children:"hive-site.xml"})," \u4E2D\u83B7\u53D6\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u63D0\u4F9B Hadoop KMS \u52A0\u5BC6\u4F20\u8F93\u4FE1\u606F\uFF0C\u793A\u4F8B\u5982\u4E0B\uFF1A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hive PROPERTIES (\n    'type'='hms',\n    'hive.metastore.uris' = 'thrift://172.21.0.1:7004',\n    'dfs.encryption.key.provider.uri' = 'kms://http@kms_host:kms_port/kms'\n);\n"})}),"\n",(0,i.jsx)(n.p,{children:"hive\u6570\u636E\u5B58\u50A8\u5728JuiceFS\uFF0C\u793A\u4F8B\u5982\u4E0B\uFF1A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hive PROPERTIES (\n    'type'='hms',\n    'hive.metastore.uris' = 'thrift://172.21.0.1:7004',\n    'hadoop.username' = 'root',\n    'fs.jfs.impl' = 'io.juicefs.JuiceFileSystem',\n    'fs.AbstractFileSystem.jfs.impl' = 'io.juicefs.JuiceFS',\n    'juicefs.meta' = 'xxx'\n);\n"})}),"\n",(0,i.jsx)(n.p,{children:"hive\u5143\u6570\u636E\u5B58\u50A8\u5728Glue\uFF0C\u6570\u636E\u5B58\u50A8\u5728S3\uFF0C\u793A\u4F8B\u5982\u4E0B\uFF1A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:'CREATE CATALOG hive PROPERTIES (\n    "type"="hms",\n    "hive.metastore.type" = "glue",\n    "aws.region" = "us-east-1",\n    "aws.glue.access-key" = "ak",\n    "aws.glue.secret-key" = "sk",\n    "AWS_ENDPOINT" = "s3.us-east-1.amazonaws.com",\n    "AWS_REGION" = "us-east-1",\n    "AWS_ACCESS_KEY" = "ak",\n    "AWS_SECRET_KEY" = "sk",\n    "use_path_style" = "true"\n);\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u5728 1.2.1 \u7248\u672C\u4E4B\u540E\uFF0C\u6211\u4EEC\u4E5F\u53EF\u4EE5\u5C06\u8FD9\u4E9B\u4FE1\u606F\u901A\u8FC7\u521B\u5EFA\u4E00\u4E2A Resource \u7EDF\u4E00\u5B58\u50A8\uFF0C\u7136\u540E\u5728\u521B\u5EFA Catalog \u65F6\u4F7F\u7528\u8FD9\u4E2A Resource\u3002\u793A\u4F8B\u5982\u4E0B\uFF1A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"# 1. \u521B\u5EFA Resource\nCREATE RESOURCE hms_resource PROPERTIES (\n    'type'='hms',\n    'hive.metastore.uris' = 'thrift://172.21.0.1:7004',\n    'hadoop.username' = 'hive',\n    'dfs.nameservices'='your-nameservice',\n    'dfs.ha.namenodes.your-nameservice'='nn1,nn2',\n    'dfs.namenode.rpc-address.your-nameservice.nn1'='172.21.0.2:4007',\n    'dfs.namenode.rpc-address.your-nameservice.nn2'='172.21.0.3:4007',\n    'dfs.client.failover.proxy.provider.your-nameservice'='org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider'\n);\n	\n# 2. \u521B\u5EFA Catalog \u5E76\u4F7F\u7528 Resource\uFF0C\u8FD9\u91CC\u7684 Key Value \u4FE1\u606F\u4F1A\u8986\u76D6 Resource \u4E2D\u7684\u4FE1\u606F\u3002\nCREATE CATALOG hive WITH RESOURCE hms_resource PROPERTIES(\n	'key' = 'value'\n);\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u521B\u5EFA Catalog \u65F6\u53EF\u4EE5\u91C7\u7528\u53C2\u6570 ",(0,i.jsx)(n.code,{children:"file.meta.cache.ttl-second"})," \u6765\u8BBE\u7F6E File Cache \u81EA\u52A8\u5931\u6548\u65F6\u95F4\uFF0C\u4E5F\u53EF\u4EE5\u5C06\u8BE5\u503C\u8BBE\u7F6E\u4E3A 0 \u6765\u7981\u7528 File Cache\u3002\u65F6\u95F4\u5355\u4F4D\u4E3A\uFF1A\u79D2\u3002\u793A\u4F8B\u5982\u4E0B\uFF1A"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hive PROPERTIES (\n    'type'='hms',\n    'hive.metastore.uris' = 'thrift://172.21.0.1:7004',\n    'hadoop.username' = 'hive',\n    'dfs.nameservices'='your-nameservice',\n    'dfs.ha.namenodes.your-nameservice'='nn1,nn2',\n    'dfs.namenode.rpc-address.your-nameservice.nn1'='172.21.0.2:4007',\n    'dfs.namenode.rpc-address.your-nameservice.nn2'='172.21.0.3:4007',\n    'dfs.client.failover.proxy.provider.your-nameservice'='org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider',\n    'file.meta.cache.ttl-second' = '60'\n);\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u6211\u4EEC\u4E5F\u53EF\u4EE5\u76F4\u63A5\u5C06 hive-site.xml \u653E\u5230 FE \u548C BE \u7684 conf \u76EE\u5F55\u4E0B\uFF0C\u7CFB\u7EDF\u4E5F\u4F1A\u81EA\u52A8\u8BFB\u53D6 hive-site.xml \u4E2D\u7684\u4FE1\u606F\u3002\u4FE1\u606F\u8986\u76D6\u7684\u89C4\u5219\u5982\u4E0B\uFF1A"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Resource \u4E2D\u7684\u4FE1\u606F\u8986\u76D6 hive-site.xml \u4E2D\u7684\u4FE1\u606F\u3002"}),"\n",(0,i.jsx)(n.li,{children:"CREATE CATALOG PROPERTIES \u4E2D\u7684\u4FE1\u606F\u8986\u76D6 Resource \u4E2D\u7684\u4FE1\u606F\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"hive-\u7248\u672C",children:"Hive \u7248\u672C"}),"\n",(0,i.jsx)(n.p,{children:"Doris \u53EF\u4EE5\u6B63\u786E\u8BBF\u95EE\u4E0D\u540C Hive \u7248\u672C\u4E2D\u7684 Hive Metastore\u3002\u5728\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CDoris \u4F1A\u4EE5 Hive 2.3 \u7248\u672C\u7684\u517C\u5BB9\u63A5\u53E3\u8BBF\u95EE Hive Metastore\u3002\u4F60\u4E5F\u53EF\u4EE5\u5728\u521B\u5EFA Catalog \u65F6\u6307\u5B9A hive \u7684\u7248\u672C\u3002\u5982\u8BBF\u95EE Hive 1.1.0 \u7248\u672C\uFF1A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hive PROPERTIES (\n    'type'='hms',\n    'hive.metastore.uris' = 'thrift://172.21.0.1:7004',\n    'hive.version' = '1.1.0'\n);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u5217\u7C7B\u578B\u6620\u5C04",children:"\u5217\u7C7B\u578B\u6620\u5C04"}),"\n",(0,i.jsx)(n.p,{children:"\u9002\u7528\u4E8E Hive/Iceberge/Hudi"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"HMS Type"}),(0,i.jsx)(n.th,{children:"Doris Type"}),(0,i.jsx)(n.th,{children:"Comment"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"tinyint"}),(0,i.jsx)(n.td,{children:"tinyint"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"smallint"}),(0,i.jsx)(n.td,{children:"smallint"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"int"}),(0,i.jsx)(n.td,{children:"int"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"bigint"}),(0,i.jsx)(n.td,{children:"bigint"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"date"}),(0,i.jsx)(n.td,{children:"date"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"timestamp"}),(0,i.jsx)(n.td,{children:"datetime"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"float"}),(0,i.jsx)(n.td,{children:"float"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"double"}),(0,i.jsx)(n.td,{children:"double"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"char"}),(0,i.jsx)(n.td,{children:"char"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"varchar"}),(0,i.jsx)(n.td,{children:"varchar"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"decimal"}),(0,i.jsx)(n.td,{children:"decimal"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"array<type>"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"array<type>"})}),(0,i.jsxs)(n.td,{children:["\u652F\u6301array\u5D4C\u5957\uFF0C\u5982 ",(0,i.jsx)(n.code,{children:"array<array<int>>"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"map<KeyType, ValueType>"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"map<KeyType, ValueType>"})}),(0,i.jsx)(n.td,{children:"\u6682\u4E0D\u652F\u6301\u5D4C\u5957\uFF0CKeyType \u548C ValueType \u9700\u8981\u4E3A\u57FA\u7840\u7C7B\u578B"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"struct<col1: Type1, col2: Type2, ...>"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"struct<col1: Type1, col2: Type2, ...>"})}),(0,i.jsx)(n.td,{children:"\u6682\u4E0D\u652F\u6301\u5D4C\u5957\uFF0CType1, Type2, ... \u9700\u8981\u4E3A\u57FA\u7840\u7C7B\u578B"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"other"}),(0,i.jsx)(n.td,{children:"unsupported"}),(0,i.jsx)(n.td,{})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"\u4F7F\u7528ranger\u8FDB\u884C\u6743\u9650\u6821\u9A8C",children:"\u4F7F\u7528Ranger\u8FDB\u884C\u6743\u9650\u6821\u9A8C"}),"\n",(0,i.jsxs)(n.version,{since:"dev",children:["\n",(0,i.jsx)(n.p,{children:"Apache Ranger\u662F\u4E00\u4E2A\u7528\u6765\u5728Hadoop\u5E73\u53F0\u4E0A\u8FDB\u884C\u76D1\u63A7\uFF0C\u542F\u7528\u670D\u52A1\uFF0C\u4EE5\u53CA\u5168\u65B9\u4F4D\u6570\u636E\u5B89\u5168\u8BBF\u95EE\u7BA1\u7406\u7684\u5B89\u5168\u6846\u67B6\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u76EE\u524Ddoris\u652F\u6301ranger\u7684\u5E93\u3001\u8868\u3001\u5217\u6743\u9650\uFF0C\u4E0D\u652F\u6301\u52A0\u5BC6\u3001\u884C\u6743\u9650\u7B49\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u73AF\u5883\u914D\u7F6E",children:"\u73AF\u5883\u914D\u7F6E"}),"\n",(0,i.jsx)(n.p,{children:"\u8FDE\u63A5\u5F00\u542F Ranger \u6743\u9650\u6821\u9A8C\u7684 Hive Metastore \u9700\u8981\u589E\u52A0\u914D\u7F6E & \u914D\u7F6E\u73AF\u5883\uFF1A"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u521B\u5EFA Catalog \u65F6\u589E\u52A0\uFF1A"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:'"access_controller.properties.ranger.service.name" = "hive",\n"access_controller.class" = "org.apache.doris.catalog.authorizer.RangerHiveAccessControllerFactory",\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u914D\u7F6E\u6240\u6709 FE \u73AF\u5883\uFF1A"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u5C06 HMS conf \u76EE\u5F55\u4E0B\u7684\u914D\u7F6E\u6587\u4EF6ranger-hive-audit.xml,ranger-hive-security.xml,ranger-policymgr-ssl.xml\u590D\u5236\u5230 <doris_home>/conf \u76EE\u5F55\u4E0B\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u4FEE\u6539 ranger-hive-security.xml \u7684\u5C5E\u6027,\u53C2\u8003\u914D\u7F6E\u5982\u4E0B\uFF1A"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:'<?xml version="1.0" encoding="UTF-8"?>\n<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>\n<configuration>\n    #The directory for caching permission data, needs to be writable\n    <property>\n        <name>ranger.plugin.hive.policy.cache.dir</name>\n        <value>/mnt/datadisk0/zhangdong/rangerdata</value>\n    </property>\n    #The time interval for periodically pulling permission data\n    <property>\n        <name>ranger.plugin.hive.policy.pollIntervalMs</name>\n        <value>30000</value>\n    </property>\n\n    <property>\n        <name>ranger.plugin.hive.policy.rest.client.connection.timeoutMs</name>\n        <value>60000</value>\n    </property>\n\n    <property>\n        <name>ranger.plugin.hive.policy.rest.client.read.timeoutMs</name>\n        <value>60000</value>\n    </property>\n\n    <property>\n        <name>ranger.plugin.hive.policy.rest.ssl.config.file</name>\n        <value></value>\n    </property>\n\n    <property>\n        <name>ranger.plugin.hive.policy.rest.url</name>\n        <value>http://172.21.0.32:6080</value>\n    </property>\n\n    <property>\n        <name>ranger.plugin.hive.policy.source.impl</name>\n        <value>org.apache.ranger.admin.client.RangerAdminRESTClient</value>\n    </property>\n\n    <property>\n        <name>ranger.plugin.hive.service.name</name>\n        <value>hive</value>\n    </property>\n\n    <property>\n        <name>xasecure.hive.update.xapolicies.on.grant.revoke</name>\n        <value>true</value>\n    </property>\n\n</configuration>\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u4E3A\u83B7\u53D6\u5230 Ranger \u9274\u6743\u672C\u8EAB\u7684\u65E5\u5FD7\uFF0C\u53EF\u5728 <doris_home>/conf \u76EE\u5F55\u4E0B\u6DFB\u52A0\u914D\u7F6E\u6587\u4EF6 log4j.properties\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u91CD\u542F FE\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u6700\u4F73\u5B9E\u8DF5",children:"\u6700\u4F73\u5B9E\u8DF5"}),"\n",(0,i.jsx)(n.p,{children:"1.\u5728ranger\u7AEF\u521B\u5EFA\u7528\u6237user1\u5E76\u6388\u6743db1.table1.col1\u7684\u67E5\u8BE2\u6743\u9650"}),"\n",(0,i.jsx)(n.p,{children:"2.\u5728ranger\u7AEF\u521B\u5EFA\u89D2\u8272role1\u5E76\u6388\u6743db1.table1.col2\u7684\u67E5\u8BE2\u6743\u9650"}),"\n",(0,i.jsx)(n.p,{children:"3.\u5728doris\u521B\u5EFA\u540C\u540D\u7528\u6237user1\uFF0Cuser1\u5C06\u76F4\u63A5\u62E5\u6709db1.table1.col1\u7684\u67E5\u8BE2\u6743\u9650"}),"\n",(0,i.jsx)(n.p,{children:"4.\u5728doris\u521B\u5EFA\u540C\u540D\u89D2\u8272role1\uFF0C\u5E76\u5C06role1\u5206\u914D\u7ED9user1\uFF0Cuser1\u5C06\u540C\u65F6\u62E5\u6709db1.table1.col1\u548Ccol2\u7684\u67E5\u8BE2\u6743\u9650"})]})}function h(e={}){let{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(t,{...e})}):t(e)}},250065:function(e,n,r){r.d(n,{Z:function(){return d},a:function(){return a}});var s=r(667294);let i={},l=s.createContext(i);function a(e){let n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);