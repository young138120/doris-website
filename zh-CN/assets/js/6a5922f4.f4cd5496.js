"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["116674"],{240930:function(e,n,l){l.r(n),l.d(n,{metadata:()=>a,contentTitle:()=>c,default:()=>h,assets:()=>r,toc:()=>s,frontMatter:()=>i});var a=JSON.parse('{"id":"lakehouse/multi-catalog/dlf","title":"\u963F\u91CC\u4E91 DLF","description":"\x3c!--","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-1.2/lakehouse/multi-catalog/dlf.md","sourceDirName":"lakehouse/multi-catalog","slug":"/lakehouse/multi-catalog/dlf","permalink":"/zh-CN/docs/1.2/lakehouse/multi-catalog/dlf","draft":false,"unlisted":false,"tags":[],"version":"1.2","frontMatter":{"title":"\u963F\u91CC\u4E91 DLF","language":"zh-CN"},"sidebar":"docs","previous":{"title":"JDBC","permalink":"/zh-CN/docs/1.2/lakehouse/multi-catalog/jdbc"},"next":{"title":"\u5E38\u89C1\u95EE\u9898","permalink":"/zh-CN/docs/1.2/lakehouse/multi-catalog/faq"}}'),t=l("785893"),o=l("250065");let i={title:"\u963F\u91CC\u4E91 DLF",language:"zh-CN"},c=void 0,r={},s=[{value:"\u8FDE\u63A5 DLF",id:"\u8FDE\u63A5-dlf",level:2},{value:"\u65B9\u5F0F\u4E00\uFF1A\u521B\u5EFA Hive Catalog \u8FDE\u63A5 DLF",id:"\u65B9\u5F0F\u4E00\u521B\u5EFA-hive-catalog-\u8FDE\u63A5-dlf",level:3},{value:"\u65B9\u5F0F\u4E8C\uFF1A\u914D\u7F6E Hive Conf \u8FDE\u63A5 DLF",id:"\u65B9\u5F0F\u4E8C\u914D\u7F6E-hive-conf-\u8FDE\u63A5-dlf",level:3}];function d(e){let n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"\u963F\u91CC\u4E91 Data Lake Formation(DLF) \u662F\u963F\u91CC\u4E91\u4E0A\u7684\u7EDF\u4E00\u5143\u6570\u636E\u7BA1\u7406\u670D\u52A1\u3002\u517C\u5BB9 Hive Metastore \u534F\u8BAE\u3002"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://www.aliyun.com/product/bigdata/dlf",children:"\u4EC0\u4E48\u662F Data Lake Formation"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u56E0\u6B64\u6211\u4EEC\u4E5F\u53EF\u4EE5\u548C\u8BBF\u95EE Hive Metastore \u4E00\u6837\uFF0C\u8FDE\u63A5\u5E76\u8BBF\u95EE DLF\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u8FDE\u63A5-dlf",children:"\u8FDE\u63A5 DLF"}),"\n",(0,t.jsx)(n.h3,{id:"\u65B9\u5F0F\u4E00\u521B\u5EFA-hive-catalog-\u8FDE\u63A5-dlf",children:"\u65B9\u5F0F\u4E00\uFF1A\u521B\u5EFA Hive Catalog \u8FDE\u63A5 DLF"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:'CREATE CATALOG hive_with_dlf PROPERTIES (\n   "type"="hms",\n   "dlf.catalog.proxyMode" = "DLF_ONLY",\n   "hive.metastore.type" = "dlf",\n   "dlf.catalog.endpoint" = "dlf.cn-beijing.aliyuncs.com",\n   "dlf.catalog.region" = "cn-beijing",\n   "dlf.catalog.uid" = "uid",\n   "dlf.catalog.accessKeyId" = "ak",\n   "dlf.catalog.accessKeySecret" = "sk"\n);\n'})}),"\n",(0,t.jsxs)(n.p,{children:["\u5176\u4E2D ",(0,t.jsx)(n.code,{children:"type"})," \u56FA\u5B9A\u4E3A ",(0,t.jsx)(n.code,{children:"hms"}),"\u3002\u5982\u679C\u9700\u8981\u516C\u7F51\u8BBF\u95EE\u963F\u91CC\u4E91\u5BF9\u8C61\u5B58\u50A8\u7684\u6570\u636E\uFF0C\u53EF\u4EE5\u8BBE\u7F6E ",(0,t.jsx)(n.code,{children:'"dlf.catalog.accessPublic"="true"'})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"dlf.catalog.endpoint"}),"\uFF1ADLF Endpoint\uFF0C\u53C2\u9605\uFF1A",(0,t.jsx)(n.a,{href:"https://www.alibabacloud.com/help/zh/data-lake-formation/latest/regions-and-endpoints",children:"DLF Region \u548C Endpoint \u5BF9\u7167\u8868"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"dlf.catalog.region"}),"\uFF1ADLF Region\uFF0C\u53C2\u9605\uFF1A",(0,t.jsx)(n.a,{href:"https://www.alibabacloud.com/help/zh/data-lake-formation/latest/regions-and-endpoints",children:"DLF Region \u548C Endpoint \u5BF9\u7167\u8868"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"dlf.catalog.uid"}),"\uFF1A\u963F\u91CC\u4E91\u8D26\u53F7\u3002\u5373\u963F\u91CC\u4E91\u63A7\u5236\u53F0\u53F3\u4E0A\u89D2\u4E2A\u4EBA\u4FE1\u606F\u7684\u201C\u4E91\u8D26\u53F7 ID\u201D\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"dlf.catalog.accessKeyId"}),"\uFF1AAccessKey\u3002\u53EF\u4EE5\u5728 ",(0,t.jsx)(n.a,{href:"https://ram.console.aliyun.com/manage/ak",children:"\u963F\u91CC\u4E91\u63A7\u5236\u53F0"})," \u4E2D\u521B\u5EFA\u548C\u7BA1\u7406\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"dlf.catalog.accessKeySecret"}),"\uFF1ASecretKey\u3002\u53EF\u4EE5\u5728 ",(0,t.jsx)(n.a,{href:"https://ram.console.aliyun.com/manage/ak",children:"\u963F\u91CC\u4E91\u63A7\u5236\u53F0"})," \u4E2D\u521B\u5EFA\u548C\u7BA1\u7406\u3002"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u5176\u4ED6\u914D\u7F6E\u9879\u4E3A\u56FA\u5B9A\u503C\uFF0C\u65E0\u9700\u6539\u52A8\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u4E4B\u540E\uFF0C\u53EF\u4EE5\u50CF\u6B63\u5E38\u7684 Hive MetaStore \u4E00\u6837\uFF0C\u8BBF\u95EE DLF \u4E0B\u7684\u5143\u6570\u636E\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u540C Hive Catalog \u4E00\u6837\uFF0C\u652F\u6301\u8BBF\u95EE DLF \u4E2D\u7684 Hive/Iceberg/Hudi \u7684\u5143\u6570\u636E\u4FE1\u606F\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"\u65B9\u5F0F\u4E8C\u914D\u7F6E-hive-conf-\u8FDE\u63A5-dlf",children:"\u65B9\u5F0F\u4E8C\uFF1A\u914D\u7F6E Hive Conf \u8FDE\u63A5 DLF"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\u521B\u5EFA hive-site.xml \u6587\u4EF6\uFF0C\u5E76\u5C06\u5176\u653E\u7F6E\u5728 ",(0,t.jsx)(n.code,{children:"fe/conf"})," \u76EE\u5F55\u4E0B\u3002"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'<?xml version="1.0"?>\n<configuration>\n    \x3c!--Set to use dlf client--\x3e\n    <property>\n        <name>hive.metastore.type</name>\n        <value>dlf</value>\n    </property>\n    <property>\n        <name>dlf.catalog.endpoint</name>\n        <value>dlf-vpc.cn-beijing.aliyuncs.com</value>\n    </property>\n    <property>\n        <name>dlf.catalog.region</name>\n        <value>cn-beijing</value>\n    </property>\n    <property>\n        <name>dlf.catalog.proxyMode</name>\n        <value>DLF_ONLY</value>\n    </property>\n    <property>\n        <name>dlf.catalog.uid</name>\n        <value>20000000000000000</value>\n    </property>\n    <property>\n        <name>dlf.catalog.accessKeyId</name>\n        <value>XXXXXXXXXXXXXXX</value>\n    </property>\n    <property>\n        <name>dlf.catalog.accessKeySecret</name>\n        <value>XXXXXXXXXXXXXXXXX</value>\n    </property>\n</configuration>\n'})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsxs)(n.li,{children:["\u91CD\u542F FE\uFF0CDoris \u4F1A\u8BFB\u53D6\u548C\u89E3\u6790 fe/conf/hive-site.xml\u3002\u5E76\u901A\u8FC7 ",(0,t.jsx)(n.code,{children:"CREATE CATALOG"})," \u8BED\u53E5\u521B\u5EFA catalog\u3002"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:'CREATE CATALOG hive_with_dlf PROPERTIES (\n   "type"="hms",\n    "hive.metastore.uris" = "thrift://127.0.0.1:9083"\n)\n'})}),"\n",(0,t.jsxs)(n.p,{children:["\u5176\u4E2D ",(0,t.jsx)(n.code,{children:"type"})," \u56FA\u5B9A\u4E3A ",(0,t.jsx)(n.code,{children:"hms"}),"\u3002",(0,t.jsx)(n.code,{children:"hive.metastore.uris"})," \u7684\u503C\u968F\u610F\u586B\u5199\u5373\u53EF\uFF0C\u5B9E\u9645\u4E0D\u4F1A\u4F7F\u7528\u3002\u4F46\u9700\u8981\u6309\u7167\u6807\u51C6 hive metastore thrift uri \u683C\u5F0F\u586B\u5199\u3002"]})]})}function h(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},250065:function(e,n,l){l.d(n,{Z:function(){return c},a:function(){return i}});var a=l(667294);let t={},o=a.createContext(t);function i(e){let n=a.useContext(o);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),a.createElement(o.Provider,{value:n},e.children)}}}]);