"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["771227"],{852695:function(e,n,s){s.r(n),s.d(n,{metadata:()=>r,contentTitle:()=>l,default:()=>p,assets:()=>a,toc:()=>o,frontMatter:()=>t});var r=JSON.parse('{"id":"admin-manual/certificate","title":"SSL\u5BC6\u94A5\u8BC1\u4E66\u914D\u7F6E","description":"\x3c!--","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-1.2/admin-manual/certificate.md","sourceDirName":"admin-manual","slug":"/admin-manual/certificate","permalink":"/zh-CN/docs/1.2/admin-manual/certificate","draft":false,"unlisted":false,"tags":[],"version":"1.2","frontMatter":{"title":"SSL\u5BC6\u94A5\u8BC1\u4E66\u914D\u7F6E","language":"zh-CN"},"sidebar":"docs","previous":{"title":"\u6027\u80FD\u4F18\u5316","permalink":"/zh-CN/docs/1.2/admin-manual/optimization"},"next":{"title":"FE SSL \u5BC6\u94A5\u8BC1\u4E66\u914D\u7F6E","permalink":"/zh-CN/docs/1.2/admin-manual/fe-certificate"}}'),i=s("785893"),c=s("250065");let t={title:"SSL\u5BC6\u94A5\u8BC1\u4E66\u914D\u7F6E",language:"zh-CN"},l="SSL\u5BC6\u94A5\u8BC1\u4E66\u914D\u7F6E",a={},o=[{value:"\u81EA\u5B9A\u4E49\u5BC6\u94A5\u8BC1\u4E66\u6587\u4EF6",id:"\u81EA\u5B9A\u4E49\u5BC6\u94A5\u8BC1\u4E66\u6587\u4EF6",level:2}];function d(e){let n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,c.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"ssl\u5BC6\u94A5\u8BC1\u4E66\u914D\u7F6E",children:"SSL\u5BC6\u94A5\u8BC1\u4E66\u914D\u7F6E"})}),"\n",(0,i.jsx)(n.p,{children:"Doris\u5F00\u542FSSL\u529F\u80FD\u9700\u8981\u914D\u7F6ECA\u5BC6\u94A5\u8BC1\u4E66\u548CServer\u7AEF\u5BC6\u94A5\u8BC1\u4E66\uFF0C\u5982\u9700\u5F00\u542F\u53CC\u5411\u8BA4\u8BC1\uFF0C\u8FD8\u9700\u751F\u6210Client\u7AEF\u5BC6\u94A5\u8BC1\u4E66\uFF1A"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u9ED8\u8BA4\u7684CA\u5BC6\u94A5\u8BC1\u4E66\u6587\u4EF6\u4F4D\u4E8E",(0,i.jsx)(n.code,{children:"Doris/fe/mysql_ssl_default_certificate/ca_certificate.p12"}),"\uFF0C\u9ED8\u8BA4\u5BC6\u7801\u4E3A",(0,i.jsx)(n.code,{children:"doris"}),"\uFF0C\u60A8\u53EF\u4EE5\u901A\u8FC7\u4FEE\u6539FE\u914D\u7F6E\u6587\u4EF6",(0,i.jsx)(n.code,{children:"conf/fe.conf"}),"\uFF0C\u6DFB\u52A0",(0,i.jsx)(n.code,{children:"mysql_ssl_default_ca_certificate = /path/to/your/certificate"}),"\u4FEE\u6539CA\u5BC6\u94A5\u8BC1\u4E66\u6587\u4EF6\uFF0C\u540C\u65F6\u4E5F\u53EF\u4EE5\u901A\u8FC7",(0,i.jsx)(n.code,{children:"mysql_ssl_default_ca_certificate_password = your_password"}),"\u6DFB\u52A0\u5BF9\u5E94\u60A8\u81EA\u5B9A\u4E49\u5BC6\u94A5\u8BC1\u4E66\u6587\u4EF6\u7684\u5BC6\u7801\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:["\u9ED8\u8BA4\u7684Server\u7AEF\u5BC6\u94A5\u8BC1\u4E66\u6587\u4EF6\u4F4D\u4E8E",(0,i.jsx)(n.code,{children:"Doris/fe/mysql_ssl_default_certificate/server_certificate.p12"}),"\uFF0C\u9ED8\u8BA4\u5BC6\u7801\u4E3A",(0,i.jsx)(n.code,{children:"doris"}),"\uFF0C\u60A8\u53EF\u4EE5\u901A\u8FC7\u4FEE\u6539FE\u914D\u7F6E\u6587\u4EF6",(0,i.jsx)(n.code,{children:"conf/fe.conf"}),"\uFF0C\u6DFB\u52A0",(0,i.jsx)(n.code,{children:"mysql_ssl_default_server_certificate = /path/to/your/certificate"}),"\u4FEE\u6539Server\u7AEF\u5BC6\u94A5\u8BC1\u4E66\u6587\u4EF6\uFF0C\u540C\u65F6\u4E5F\u53EF\u4EE5\u901A\u8FC7",(0,i.jsx)(n.code,{children:"mysql_ssl_default_server_certificate_password = your_password"}),"\u6DFB\u52A0\u5BF9\u5E94\u60A8\u81EA\u5B9A\u4E49\u5BC6\u94A5\u8BC1\u4E66\u6587\u4EF6\u7684\u5BC6\u7801\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:["\u9ED8\u8BA4\u751F\u6210\u4E86\u4E00\u4EFDClient\u7AEF\u7684\u5BC6\u94A5\u8BC1\u4E66\uFF0C\u5206\u522B\u5B58\u653E\u5728",(0,i.jsx)(n.code,{children:"Doris/fe/mysql_ssl_default_certificate/client-key.pem"}),"\u548C",(0,i.jsx)(n.code,{children:"Doris/fe/mysql_ssl_default_certificate/client_certificate/"}),"\u3002"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u81EA\u5B9A\u4E49\u5BC6\u94A5\u8BC1\u4E66\u6587\u4EF6",children:"\u81EA\u5B9A\u4E49\u5BC6\u94A5\u8BC1\u4E66\u6587\u4EF6"}),"\n",(0,i.jsxs)(n.p,{children:["\u9664\u4E86Doris\u9ED8\u8BA4\u7684\u8BC1\u4E66\u6587\u4EF6\uFF0C\u60A8\u4E5F\u53EF\u4EE5\u901A\u8FC7",(0,i.jsx)(n.code,{children:"openssl"}),"\u751F\u6210\u81EA\u5B9A\u4E49\u7684\u8BC1\u4E66\u6587\u4EF6\u3002\u6B65\u9AA4\u53C2\u8003",(0,i.jsx)(n.a,{href:"https://dev.mysql.com/doc/refman/8.0/en/creating-ssl-files-using-openssl.html",children:"mysql\u751F\u6210ssl\u8BC1\u4E66"}),"\n\u5177\u4F53\u5982\u4E0B\uFF1A"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u751F\u6210CA\u3001Server\u7AEF\u548CClient\u7AEF\u7684\u5BC6\u94A5\u548C\u8BC1\u4E66"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# \u751F\u6210CA certificate\nopenssl genrsa 2048 > ca-key.pem\nopenssl req -new -x509 -nodes -days 3600 \\\n        -key ca-key.pem -out ca.pem\n\n# \u751F\u6210server certificate, \u5E76\u7528\u4E0A\u8FF0CA\u7B7E\u540D\n# server-cert.pem = public key, server-key.pem = private key\nopenssl req -newkey rsa:2048 -days 3600 \\\n        -nodes -keyout server-key.pem -out server-req.pem\nopenssl rsa -in server-key.pem -out server-key.pem\nopenssl x509 -req -in server-req.pem -days 3600 \\\n        -CA ca.pem -CAkey ca-key.pem -set_serial 01 -out server-cert.pem\n\n# \u751F\u6210client certificate, \u5E76\u7528\u4E0A\u8FF0CA\u7B7E\u540D\n# client-cert.pem = public key, client-key.pem = private key\nopenssl req -newkey rsa:2048 -days 3600 \\\n        -nodes -keyout client-key.pem -out client-req.pem\nopenssl rsa -in client-key.pem -out client-key.pem\nopenssl x509 -req -in client-req.pem -days 3600 \\\n        -CA ca.pem -CAkey ca-key.pem -set_serial 01 -out client-cert.pem\n"})}),"\n",(0,i.jsx)(n.p,{children:"2.\u9A8C\u8BC1\u521B\u5EFA\u7684\u8BC1\u4E66\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"openssl verify -CAfile ca.pem server-cert.pem client-cert.pem\n"})}),"\n",(0,i.jsx)(n.p,{children:"3.\u5C06\u60A8\u7684CA\u5BC6\u94A5\u548C\u8BC1\u4E66\u548CSever\u7AEF\u5BC6\u94A5\u548C\u8BC1\u4E66\u5206\u522B\u5408\u5E76\u5230 PKCS#12 (P12) \u5305\u4E2D\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"# \u6253\u5305CA\u5BC6\u94A5\u548C\u8BC1\u4E66\nopenssl pkcs12 -inkey ca-key.pem -in ca.pem -export -out ca_certificate.p12\n\n# \u6253\u5305Server\u7AEF\u5BC6\u94A5\u548C\u8BC1\u4E66\nopenssl pkcs12 -inkey server-key.pem -in server-cert.pem -export -out server_certificate.p12\n"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://www.ibm.com/docs/en/api-connect/2018.x?topic=overview-generating-self-signed-certificate-using-openssl",children:"\u53C2\u8003\u6587\u6863"})}),"\n"]})]})}function p(e={}){let{wrapper:n}={...(0,c.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},250065:function(e,n,s){s.d(n,{Z:function(){return l},a:function(){return t}});var r=s(667294);let i={},c=r.createContext(i);function t(e){let n=r.useContext(c);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(c.Provider,{value:n},e.children)}}}]);