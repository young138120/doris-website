"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["204445"],{598281:function(n,e,l){l.r(e),l.d(e,{metadata:()=>i,contentTitle:()=>d,default:()=>h,assets:()=>t,toc:()=>a,frontMatter:()=>c});var i=JSON.parse('{"id":"admin-manual/cluster-management/upgrade","title":"\u96C6\u7FA4\u5347\u7EA7","description":"\x3c!--","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-1.2/admin-manual/cluster-management/upgrade.md","sourceDirName":"admin-manual/cluster-management","slug":"/admin-manual/cluster-management/upgrade","permalink":"/zh-CN/docs/1.2/admin-manual/cluster-management/upgrade","draft":false,"unlisted":false,"tags":[],"version":"1.2","frontMatter":{"title":"\u96C6\u7FA4\u5347\u7EA7","language":"zh-CN"},"sidebar":"docs","previous":{"title":"SYNC","permalink":"/zh-CN/docs/1.2/sql-manual/sql-reference/Utility-Statements/SYNC"},"next":{"title":"\u5F39\u6027\u6269\u7F29\u5BB9","permalink":"/zh-CN/docs/1.2/admin-manual/cluster-management/elastic-expansion"}}'),s=l("785893"),r=l("250065");let c={title:"\u96C6\u7FA4\u5347\u7EA7",language:"zh-CN"},d="\u96C6\u7FA4\u5347\u7EA7",t={},a=[{value:"\u524D\u7F6E\u5DE5\u4F5C",id:"\u524D\u7F6E\u5DE5\u4F5C",level:2},{value:"\u6D4B\u8BD5 BE \u5347\u7EA7\u6B63\u786E\u6027",id:"\u6D4B\u8BD5-be-\u5347\u7EA7\u6B63\u786E\u6027",level:2},{value:"\u6D4B\u8BD5 FE \u5143\u6570\u636E\u517C\u5BB9\u6027",id:"\u6D4B\u8BD5-fe-\u5143\u6570\u636E\u517C\u5BB9\u6027",level:2},{value:"\u5347\u7EA7\u51C6\u5907",id:"\u5347\u7EA7\u51C6\u5907",level:2},{value:"\u6EDA\u52A8\u5347\u7EA7",id:"\u6EDA\u52A8\u5347\u7EA7",level:2},{value:"\u5173\u4E8E\u7248\u672C\u56DE\u6EDA",id:"\u5173\u4E8E\u7248\u672C\u56DE\u6EDA",level:2}];function o(n){let e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",version:"version",...(0,r.a)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"\u96C6\u7FA4\u5347\u7EA7",children:"\u96C6\u7FA4\u5347\u7EA7"})}),"\n",(0,s.jsx)(e.p,{children:"Doris \u53EF\u4EE5\u901A\u8FC7\u6EDA\u52A8\u5347\u7EA7\u7684\u65B9\u5F0F\uFF0C\u5E73\u6ED1\u8FDB\u884C\u5347\u7EA7\u3002\u5EFA\u8BAE\u6309\u7167\u4EE5\u4E0B\u6B65\u9AA4\u8FDB\u884C\u5B89\u5168\u5347\u7EA7\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsxs)(e.strong,{children:["\u6587\u4E2D\u7684\u51FA\u73B0\u7684BE\u4E8C\u8FDB\u5236\u6587\u4EF6\u540D\u79F0 ",(0,s.jsx)(e.code,{children:"doris_be"}),"\uFF0C\u5728\u4E4B\u524D\u7684\u7248\u672C\u4E2D\u4E3A ",(0,s.jsx)(e.code,{children:"palo_be"}),"\u3002"]})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u6CE8\uFF1A"})}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"Doris\u4E0D\u652F\u6301\u8DE8\u4E24\u4F4D\u7248\u672C\u53F7\u8FDB\u884C\u5347\u7EA7\uFF0C\u4F8B\u5982\uFF1A\u4E0D\u80FD\u4ECE0.13\u76F4\u63A5\u5347\u7EA7\u52300.15\uFF0C\u53EA\u80FD\u901A\u8FC70.13.x -> 0.14.x -> 0.15.x\uFF0C\u4E09\u4F4D\u7248\u672C\u53F7\u53EF\u4EE5\u8DE8\u7248\u672C\u5347\u7EA7\uFF0C\u6BD4\u5982\u4ECE0.13.15\u53EF\u4EE5\u76F4\u63A5\u5347\u7EA7\u52300.14.13.1\uFF0C\u4E0D\u5FC5\u4E00\u5B9A\u8981\u5347\u7EA70.14.7 \u6216\u8005 0.14.12.1\u8FD9\u79CD\u7248\u672C"}),"\n",(0,s.jsx)(e.li,{children:"\u4EE5\u4E0B\u65B9\u5F0F\u5747\u5EFA\u7ACB\u5728\u9AD8\u53EF\u7528\u90E8\u7F72\u7684\u60C5\u51B5\u4E0B\u3002\u5373\u6570\u636E 3 \u526F\u672C\uFF0CFE \u9AD8\u53EF\u7528\u60C5\u51B5\u4E0B\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u524D\u7F6E\u5DE5\u4F5C",children:"\u524D\u7F6E\u5DE5\u4F5C"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u5173\u95ED\u96C6\u7FA4\u526F\u672C\u4FEE\u590D\u548C\u5747\u8861\u529F\u80FD"}),"\n",(0,s.jsx)(e.p,{children:"\u5347\u7EA7\u8FC7\u7A0B\u4E2D\u4F1A\u6709\u8282\u70B9\u91CD\u542F\uFF0C\u6240\u4EE5\u53EF\u80FD\u4F1A\u89E6\u53D1\u4E0D\u5FC5\u8981\u7684\u96C6\u7FA4\u5747\u8861\u548C\u526F\u672C\u4FEE\u590D\u903B\u8F91\u3002\u53EF\u4EE5\u5148\u901A\u8FC7\u4EE5\u4E0B\u547D\u4EE4\u5173\u95ED\uFF1A"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'# \u5173\u95ED\u526F\u672C\u5747\u8861\u903B\u8F91\u3002\u5173\u95ED\u540E\uFF0C\u4E0D\u4F1A\u518D\u89E6\u53D1\u666E\u901A\u8868\u526F\u672C\u7684\u5747\u8861\u64CD\u4F5C\u3002\n$ mysql-client > admin set frontend config("disable_balance" = "true");\n\n# \u5173\u95ED colocation \u8868\u7684\u526F\u672C\u5747\u8861\u903B\u8F91\u3002\u5173\u95ED\u540E\uFF0C\u4E0D\u4F1A\u518D\u89E6\u53D1 colocation \u8868\u7684\u526F\u672C\u91CD\u5206\u5E03\u64CD\u4F5C\u3002\n$ mysql-client > admin set frontend config("disable_colocate_balance" = "true");\n\n# \u5173\u95ED\u526F\u672C\u8C03\u5EA6\u903B\u8F91\u3002\u5173\u95ED\u540E\uFF0C\u6240\u6709\u5DF2\u4EA7\u751F\u7684\u526F\u672C\u4FEE\u590D\u548C\u5747\u8861\u4EFB\u52A1\u4E0D\u4F1A\u518D\u88AB\u8C03\u5EA6\u3002\n$ mysql-client > admin set frontend config("disable_tablet_scheduler" = "true");\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u5F53\u96C6\u7FA4\u5347\u7EA7\u5B8C\u6BD5\u540E\uFF0C\u5728\u901A\u8FC7\u4EE5\u4E0A\u547D\u4EE4\u5C06\u5BF9\u5E94\u914D\u7F6E\u8BBE\u4E3A\u539F\u503C\u5373\u53EF\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u91CD\u8981\uFF01\uFF01\u5728\u5347\u7EA7\u4E4B\u524D\u9700\u8981\u5907\u4EFD\u5143\u6570\u636E\uFF08\u6574\u4E2A\u76EE\u5F55\u90FD\u9700\u8981\u5907\u4EFD\uFF09\uFF01\uFF01"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u6D4B\u8BD5-be-\u5347\u7EA7\u6B63\u786E\u6027",children:"\u6D4B\u8BD5 BE \u5347\u7EA7\u6B63\u786E\u6027"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u4EFB\u610F\u9009\u62E9\u4E00\u4E2A BE \u8282\u70B9\uFF0C\u90E8\u7F72\u6700\u65B0\u7684 doris_be \u4E8C\u8FDB\u5236\u6587\u4EF6\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u91CD\u542F BE \u8282\u70B9\uFF0C\u901A\u8FC7 BE \u65E5\u5FD7 be.INFO\uFF0C\u67E5\u770B\u662F\u5426\u542F\u52A8\u6210\u529F\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["\u5982\u679C\u542F\u52A8\u5931\u8D25\uFF0C\u53EF\u4EE5\u5148\u6392\u67E5\u539F\u56E0\u3002\u5982\u679C\u9519\u8BEF\u4E0D\u53EF\u6062\u590D\uFF0C\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7 DROP BACKEND \u5220\u9664\u8BE5 BE\u3001\u6E05\u7406\u6570\u636E\u540E\uFF0C\u4F7F\u7528\u4E0A\u4E00\u4E2A\u7248\u672C\u7684 doris_be \u91CD\u65B0\u542F\u52A8 BE\u3002\u7136\u540E\u91CD\u65B0 ADD BACKEND\u3002\uFF08",(0,s.jsx)(e.strong,{children:"\u8BE5\u65B9\u6CD5\u4F1A\u5BFC\u81F4\u4E22\u5931\u4E00\u4E2A\u6570\u636E\u526F\u672C\uFF0C\u8BF7\u52A1\u5FC5\u786E\u4FDD3\u526F\u672C\u5B8C\u6574\u7684\u60C5\u51B5\u4E0B\uFF0C\u6267\u884C\u8FD9\u4E2A\u64CD\u4F5C\uFF01\uFF01\uFF01"}),"\uFF09"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u5B89\u88C5 Java UDF \u51FD\u6570"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.version,{since:"1.2.0",children:"\u5B89\u88C5 Java UDF \u51FD\u6570\uFF1A "}),", \u56E0\u4E3A\u4ECE1.2 \u7248\u672C\u5F00\u59CB\u652F\u6301Java UDF \u51FD\u6570\uFF0C\u9700\u8981\u4ECE\u5B98\u7F51\u4E0B\u8F7D Java UDF \u51FD\u6570\u7684 JAR \u5305\u653E\u5230 BE \u7684 lib \u76EE\u5F55\u4E0B\uFF0C\u5426\u5219\u53EF\u80FD\u4F1A\u542F\u52A8\u5931\u8D25\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u6D4B\u8BD5-fe-\u5143\u6570\u636E\u517C\u5BB9\u6027",children:"\u6D4B\u8BD5 FE \u5143\u6570\u636E\u517C\u5BB9\u6027"}),"\n",(0,s.jsxs)(e.ol,{start:"0",children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"\u91CD\u8981\uFF01!\u5143\u6570\u636E\u517C\u5BB9\u6027\u5F02\u5E38\u5F88\u53EF\u80FD\u5BFC\u81F4\u6570\u636E\u65E0\u6CD5\u6062\u590D\uFF01\uFF01"})}),"\n",(0,s.jsx)(e.li,{children:"\u5355\u72EC\u4F7F\u7528\u65B0\u7248\u672C\u90E8\u7F72\u4E00\u4E2A\u6D4B\u8BD5\u7528\u7684 FE \u8FDB\u7A0B\uFF08\u5EFA\u8BAE\u5728\u81EA\u5DF1\u672C\u5730\u7684\u5F00\u53D1\u673A\uFF0C\u6216\u8005BE\u8282\u70B9\u3002\u5982\u679C\u5728Follower\u6216\u8005Observer\u8282\u70B9\u4E0A\uFF0C\u9700\u8981\u505C\u6B62\u542F\u52A8\u7684\u8FDB\u7A0B,\u4F46\u662F\u4E0D\u5EFA\u8BAE\u5728Follower\u6216\u8005Observer\u8282\u70B9\u4E0A\u6D4B\u8BD5\uFF09\u3002"}),"\n",(0,s.jsxs)(e.li,{children:["\u4FEE\u6539\u6D4B\u8BD5\u7528\u7684 FE \u7684\u914D\u7F6E\u6587\u4EF6 fe.conf\uFF0C\u5C06\u6240\u6709\u7AEF\u53E3\u8BBE\u7F6E\u4E3A",(0,s.jsx)(e.strong,{children:"\u4E0E\u7EBF\u4E0A\u4E0D\u540C"}),"\u3002"]}),"\n",(0,s.jsx)(e.li,{children:"\u5728 fe.conf \u6DFB\u52A0\u914D\u7F6E\uFF1Acluster_id=123456"}),"\n",(0,s.jsx)(e.li,{children:"\u5728 fe.conf \u6DFB\u52A0\u914D\u7F6E\uFF1Ametadata_failure_recovery=true"}),"\n",(0,s.jsx)(e.li,{children:"\u62F7\u8D1D\u7EBF\u4E0A\u73AF\u5883 Master FE \u7684\u5143\u6570\u636E\u76EE\u5F55 doris-meta \u5230\u6D4B\u8BD5\u73AF\u5883"}),"\n",(0,s.jsx)(e.li,{children:"\u5C06\u62F7\u8D1D\u5230\u6D4B\u8BD5\u73AF\u5883\u4E2D\u7684 doris-meta/image/VERSION \u6587\u4EF6\u4E2D\u7684 cluster_id \u4FEE\u6539\u4E3A 123456\uFF08\u5373\u4E0E\u7B2C3\u6B65\u4E2D\u76F8\u540C\uFF09"}),"\n",(0,s.jsx)(e.li,{children:"\u5728\u6D4B\u8BD5\u73AF\u5883\u4E2D\uFF0C\u8FD0\u884C sh bin/start_fe.sh \u542F\u52A8 FE"}),"\n",(0,s.jsx)(e.li,{children:"\u901A\u8FC7 FE \u65E5\u5FD7 fe.log \u89C2\u5BDF\u662F\u5426\u542F\u52A8\u6210\u529F\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u5982\u679C\u542F\u52A8\u6210\u529F\uFF0C\u8FD0\u884C sh bin/stop_fe.sh \u505C\u6B62\u6D4B\u8BD5\u73AF\u5883\u7684 FE \u8FDB\u7A0B\u3002"}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"\u4EE5\u4E0A 2-6 \u6B65\u7684\u76EE\u7684\u662F\u9632\u6B62\u6D4B\u8BD5\u73AF\u5883\u7684FE\u542F\u52A8\u540E\uFF0C\u9519\u8BEF\u8FDE\u63A5\u5230\u7EBF\u4E0A\u73AF\u5883\u4E2D\u3002"})}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u6CE8\uFF1A"}),"\n1.1.x \u7248\u672C\u5347\u7EA7 1.2.x \u7248\u672C\u65F6\uFF0C\u9700\u8981\u5148\u5220\u9664\u5DF2\u6709\u7684\u539F\u751F UDF \uFF1B\u5426\u5219\u4F1A\u5BFC\u81F4FE\u542F\u52A8\u5931\u8D25\uFF1B\u5E76\u4E141.2\u7248\u672C\u5F00\u59CB\u4E0D\u518D\u5BF9\u539F\u751F UDF\u63D0\u4F9B\u652F\u6301\uFF0C\u8BF7\u4F7F\u7528 ",(0,s.jsx)(e.a,{href:"../../ecosystem/udf/java-user-defined-function.md",children:"Java UDF"}),"\u3002"]}),"\n",(0,s.jsx)(e.h2,{id:"\u5347\u7EA7\u51C6\u5907",children:"\u5347\u7EA7\u51C6\u5907"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u5728\u5B8C\u6210\u6570\u636E\u6B63\u786E\u6027\u9A8C\u8BC1\u540E\uFF0C\u5C06 BE \u548C FE \u65B0\u7248\u672C\u7684\u4E8C\u8FDB\u5236\u6587\u4EF6\u5206\u53D1\u5230\u5404\u81EA\u76EE\u5F55\u4E0B\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u539F\u5219\u4E0A\u7248\u672C\u5347\u7EA7\u9700\u8981\u66FF\u6362 FE \u548C BE \u7684 lib \u76EE\u5F55\u4EE5\u53CA bin \u76EE\u5F55\uFF0C\u548C\u9664 conf \u76EE\u5F55\u3001\u6570\u636E\u76EE\u5F55\uFF08FE \u7684 doris-meta\uFF0CBE \u7684 storage\uFF09\u3001log \u76EE\u5F55\u5916\u7684\u5176\u4ED6\u76EE\u5F55\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u6EDA\u52A8\u5347\u7EA7",children:"\u6EDA\u52A8\u5347\u7EA7"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u786E\u8BA4\u65B0\u7248\u672C\u7684\u6587\u4EF6\u90E8\u7F72\u5B8C\u6210\u540E\u3002\u9010\u53F0\u91CD\u542F FE \u548C BE \u5B9E\u4F8B\u5373\u53EF\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u5EFA\u8BAE\u9010\u53F0\u91CD\u542F BE \u540E\uFF0C\u518D\u9010\u53F0\u91CD\u542F FE\u3002\u56E0\u4E3A\u901A\u5E38 Doris \u4FDD\u8BC1 FE \u5230 BE \u7684\u5411\u540E\u517C\u5BB9\u6027\uFF0C\u5373\u8001\u7248\u672C\u7684 FE \u53EF\u4EE5\u8BBF\u95EE\u65B0\u7248\u672C\u7684 BE\u3002\u4F46\u53EF\u80FD\u4E0D\u652F\u6301\u8001\u7248\u672C\u7684 BE \u8BBF\u95EE\u65B0\u7248\u672C\u7684 FE\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u5EFA\u8BAE\u786E\u8BA4\u524D\u4E00\u4E2A\u5B9E\u4F8B\u542F\u52A8\u6210\u529F\u540E\uFF0C\u518D\u91CD\u542F\u4E0B\u4E00\u4E2A\u5B9E\u4F8B\u3002\u5B9E\u4F8B\u542F\u52A8\u6210\u529F\u7684\u6807\u8BC6\uFF0C\u8BF7\u53C2\u9605\u5B89\u88C5\u90E8\u7F72\u6587\u6863\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u5173\u4E8E\u7248\u672C\u56DE\u6EDA",children:"\u5173\u4E8E\u7248\u672C\u56DE\u6EDA"}),"\n",(0,s.jsx)(e.p,{children:"\u56E0\u4E3A\u6570\u636E\u5E93\u662F\u4E00\u4E2A\u6709\u72B6\u6001\u7684\u670D\u52A1\uFF0C\u6240\u4EE5\u5728\u5927\u591A\u6570\u60C5\u51B5\u4E0B\uFF0CDoris \u65E0\u6CD5\u652F\u6301\u7248\u672C\u56DE\u6EDA\uFF08\u7248\u672C\u964D\u7EA7\uFF09\u3002\u5728\u67D0\u4E9B\u60C5\u51B5\u4E0B\uFF0C\u53EF\u4EE5\u652F\u6301 3 \u4F4D\u6216 4 \u4F4D\u7248\u672C\u7684\u56DE\u6EDA\uFF0C\u4F46\u4E0D\u4F1A\u652F\u6301 2 \u4F4D\u7248\u672C\u7684\u56DE\u6EDA\u3002\n\u6240\u4EE5\u5EFA\u8BAE\u901A\u8FC7\u5148\u5347\u7EA7\u90E8\u5206\u8282\u70B9\u5E76\u89C2\u5BDF\u4E1A\u52A1\u8FD0\u884C\u60C5\u51B5\u7684\u65B9\u5F0F\uFF08\u7070\u5EA6\u5347\u7EA7\uFF09\u6765\u964D\u4F4E\u5347\u7EA7\u98CE\u9669\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u975E\u6CD5\u7684\u56DE\u6EDA\u64CD\u4F5C\u53EF\u80FD\u5BFC\u81F4\u6570\u636E\u4E22\u5931\u548C\u635F\u574F\u3002"})})]})}function h(n={}){let{wrapper:e}={...(0,r.a)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(o,{...n})}):o(n)}},250065:function(n,e,l){l.d(e,{Z:function(){return d},a:function(){return c}});var i=l(667294);let s={},r=i.createContext(s);function c(n){let e=i.useContext(r);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:c(n.components),i.createElement(r.Provider,{value:e},n.children)}}}]);