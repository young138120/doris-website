"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["643316"],{830984:function(e,n,t){t.r(n),t.d(n,{metadata:()=>a,contentTitle:()=>i,default:()=>p,assets:()=>l,toc:()=>d,frontMatter:()=>s});var a=JSON.parse('{"id":"data-operate/import/import-way/s3-load-manual","title":"S3 Load","description":"\x3c!--","source":"@site/versioned_docs/version-1.2/data-operate/import/import-way/s3-load-manual.md","sourceDirName":"data-operate/import/import-way","slug":"/data-operate/import/import-way/s3-load-manual","permalink":"/docs/1.2/data-operate/import/import-way/s3-load-manual","draft":false,"unlisted":false,"tags":[],"version":"1.2","frontMatter":{"title":"S3 Load","language":"en"},"sidebar":"docs","previous":{"title":"Stream load","permalink":"/docs/1.2/data-operate/import/import-way/stream-load-manual"},"next":{"title":"Insert Into","permalink":"/docs/1.2/data-operate/import/import-way/insert-into-manual"}}'),r=t("785893"),o=t("250065");let s={title:"S3 Load",language:"en"},i="S3 Load",l={},d=[{value:"Applicable scenarios",id:"applicable-scenarios",level:2},{value:"Preparing",id:"preparing",level:2},{value:"Start Loading",id:"start-loading",level:2},{value:"FAQ",id:"faq",level:2}];function c(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",version:"version",...(0,o.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"s3-load",children:"S3 Load"})}),"\n",(0,r.jsx)(n.p,{children:"Starting from version 0.14, Doris supports the direct import of data from online storage systems that support the S3 protocol through the S3 protocol."}),"\n",(0,r.jsx)(n.p,{children:"This document mainly introduces how to import data stored in AWS S3. It also supports the import of other object storage systems that support the S3 protocol, such as Baidu Cloud\u2019s BOS, Alibaba Cloud\u2019s OSS and Tencent Cloud\u2019s COS, etc."}),"\n",(0,r.jsx)(n.h2,{id:"applicable-scenarios",children:"Applicable scenarios"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Source data in S3 protocol accessible storage systems, such as S3, BOS."}),"\n",(0,r.jsx)(n.li,{children:"Data volumes range from tens to hundreds of GB."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"preparing",children:"Preparing"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Standard AK and SK First, you need to find or regenerate AWS ",(0,r.jsx)(n.code,{children:"Access keys"}),", you can find the generation method in ",(0,r.jsx)(n.code,{children:"My Security Credentials"})," of AWS console, as shown in the following figure: ",(0,r.jsx)(n.a,{href:"https://doris.apache.org/images/aws_ak_sk.png",children:"AK_SK"})," Select ",(0,r.jsx)(n.code,{children:"Create New Access Key"})," and pay attention to save and generate AK and SK."]}),"\n",(0,r.jsxs)(n.li,{children:["Prepare REGION and ENDPOINT REGION can be selected when creating the bucket or can be viewed in the bucket list. ENDPOINT can be found through REGION on the following page ",(0,r.jsx)(n.a,{href:"https://docs.aws.amazon.com/general/latest/gr/s3.html#s3_region",children:"AWS Documentation"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Other cloud storage systems can find relevant information compatible with S3 in corresponding documents"}),"\n",(0,r.jsx)(n.h2,{id:"start-loading",children:"Start Loading"}),"\n",(0,r.jsxs)(n.p,{children:["Like Broker Load just replace ",(0,r.jsx)(n.code,{children:"WITH BROKER broker_name ()"})," with"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:'    WITH S3\n    (\n        "AWS_ENDPOINT" = "AWS_ENDPOINT",\n        "AWS_ACCESS_KEY" = "AWS_ACCESS_KEY",\n        "AWS_SECRET_KEY"="AWS_SECRET_KEY",\n        "AWS_REGION" = "AWS_REGION"\n    )\n'})}),"\n",(0,r.jsx)(n.p,{children:"example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'    LOAD LABEL example_db.example_label_1\n    (\n        DATA INFILE("s3://your_bucket_name/your_file.txt")\n        INTO TABLE load_test\n        COLUMNS TERMINATED BY ","\n    )\n    WITH S3\n    (\n        "AWS_ENDPOINT" = "AWS_ENDPOINT",\n        "AWS_ACCESS_KEY" = "AWS_ACCESS_KEY",\n        "AWS_SECRET_KEY"="AWS_SECRET_KEY",\n        "AWS_REGION" = "AWS_REGION"\n    )\n    PROPERTIES\n    (\n        "timeout" = "3600"\n    );\n'})}),"\n",(0,r.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["S3 SDK uses virtual-hosted style by default. However, some object storage systems may not be enabled or support virtual-hosted style access. At this time, we can add the ",(0,r.jsx)(n.code,{children:"use_path_style"})," parameter to force the use of path style:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:'   WITH S3\n   (\n         "AWS_ENDPOINT" = "AWS_ENDPOINT",\n         "AWS_ACCESS_KEY" = "AWS_ACCESS_KEY",\n         "AWS_SECRET_KEY"="AWS_SECRET_KEY",\n         "AWS_REGION" = "AWS_REGION",\n         "use_path_style" = "true"\n   )\n'})}),"\n",(0,r.jsxs)(n.version,{since:"1.2",children:["\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"Support using temporary security credentials to access object stores that support the S3 protocol:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'  WITH S3\n  (\n        "AWS_ENDPOINT" = "AWS_ENDPOINT",\n        "AWS_ACCESS_KEY" = "AWS_TEMP_ACCESS_KEY",\n        "AWS_SECRET_KEY" = "AWS_TEMP_SECRET_KEY",\n        "AWS_TOKEN" = "AWS_TEMP_TOKEN",\n        "AWS_REGION" = "AWS_REGION"\n  )\n'})}),"\n"]})]})}function p(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},250065:function(e,n,t){t.d(n,{Z:function(){return i},a:function(){return s}});var a=t(667294);let r={},o=a.createContext(r);function s(e){let n=a.useContext(o);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),a.createElement(o.Provider,{value:n},e.children)}}}]);