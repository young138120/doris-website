"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["441109"],{1758:function(e,n,a){a.r(n),a.d(n,{metadata:()=>l,contentTitle:()=>d,default:()=>h,assets:()=>o,toc:()=>c,frontMatter:()=>i});var l=JSON.parse('{"id":"lakehouse/datalake-analytics/dlf","title":"Alibaba Cloud DLF","description":"\x3c!--","source":"@site/docs/lakehouse/datalake-analytics/dlf.md","sourceDirName":"lakehouse/datalake-analytics","slug":"/lakehouse/datalake-analytics/dlf","permalink":"/docs/dev/lakehouse/datalake-analytics/dlf","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Alibaba Cloud DLF","language":"en"},"sidebar":"docs","previous":{"title":"Kudu Catalog","permalink":"/docs/dev/lakehouse/datalake-analytics/kudu"},"next":{"title":"TPCH","permalink":"/docs/dev/lakehouse/datalake-analytics/tpch"}}'),t=a("785893"),s=a("250065");let i={title:"Alibaba Cloud DLF",language:"en"},d="Alibaba Cloud DLF",o={},c=[{value:"Connect to DLF",id:"connect-to-dlf",level:2},{value:"Create a DLF Catalog.",id:"create-a-dlf-catalog",level:3},{value:"Use OSS-HDFS as the datasource",id:"use-oss-hdfs-as-the-datasource",level:3},{value:"DLF Iceberg Catalog",id:"dlf-iceberg-catalog",level:3},{value:"Column type mapping",id:"column-type-mapping",level:2}];function r(e){let n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"alibaba-cloud-dlf",children:"Alibaba Cloud DLF"})}),"\n",(0,t.jsx)(n.p,{children:"Data Lake Formation (DLF) is the unified metadata management service of Alibaba Cloud. It is compatible with the Hive Metastore protocol."}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://www.alibabacloud.com/product/datalake-formation",children:"What is DLF"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Doris can access DLF the same way as it accesses Hive Metastore."}),"\n",(0,t.jsx)(n.h2,{id:"connect-to-dlf",children:"Connect to DLF"}),"\n",(0,t.jsx)(n.h3,{id:"create-a-dlf-catalog",children:"Create a DLF Catalog."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:'CREATE CATALOG dlf PROPERTIES (\n   "type"="hms",\n   "hive.metastore.type" = "dlf",\n   "dlf.proxy.mode" = "DLF_ONLY",\n   "dlf.endpoint" = "datalake-vpc.cn-beijing.aliyuncs.com",\n   "dlf.region" = "cn-beijing",\n   "dlf.uid" = "uid",\n   "dlf.catalog.id" = "catalog_id", //optional\n   "dlf.access_key" = "ak",\n   "dlf.secret_key" = "sk"\n);\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"type"})," should always be ",(0,t.jsx)(n.code,{children:"hms"}),". If you need to access Alibaba Cloud OSS on the public network, can add ",(0,t.jsx)(n.code,{children:'"dlf.access.public"="true"'}),"."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"dlf.endpoint"}),": DLF Endpoint. See ",(0,t.jsx)(n.a,{href:"https://www.alibabacloud.com/help/en/data-lake-formation/latest/regions-and-endpoints",children:"Regions and Endpoints of DLF"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"dlf.region"}),": DLF Region. See ",(0,t.jsx)(n.a,{href:"https://www.alibabacloud.com/help/en/data-lake-formation/latest/regions-and-endpoints",children:"Regions and Endpoints of DLF"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"dlf.uid"}),': Alibaba Cloud account. You can find the "Account ID" in the upper right corner on the Alibaba Cloud console.']}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"dlf.catalog.id"}),": Optional. Used to specify the dlf catalog, if not specified, the default Catalog ID will be used."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"dlf.access_key"}),"\uFF1AAccessKey, which you can create and manage on the ",(0,t.jsx)(n.a,{href:"https://ram.console.aliyun.com/manage/ak",children:"Alibaba Cloud console"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"dlf.secret_key"}),"\uFF1ASecretKey, which you can create and manage on the ",(0,t.jsx)(n.a,{href:"https://ram.console.aliyun.com/manage/ak",children:"Alibaba Cloud console"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Other configuration items are fixed and require no modifications."}),"\n",(0,t.jsx)(n.p,{children:"After the above steps, you can access metadata in DLF the same way as you access Hive MetaStore."}),"\n",(0,t.jsx)(n.p,{children:"Doris supports accessing Hive/Iceberg/Hudi metadata in DLF."}),"\n",(0,t.jsx)(n.h3,{id:"use-oss-hdfs-as-the-datasource",children:"Use OSS-HDFS as the datasource"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Enable OSS-HDFS. ",(0,t.jsx)(n.a,{href:"https://www.alibabacloud.com/help/en/e-mapreduce/latest/oss-hdfsnew",children:"Grant access to OSS or OSS-HDFS"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Download the SDK. ",(0,t.jsx)(n.a,{href:"https://github.com/aliyun/alibabacloud-jindodata/blob/master/docs/user/5.x/5.0.0-beta7/jindodata_download.md",children:"JindoData SDK"}),". If the Jindo SDK directory already exists on the cluster, skip this step."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Decompress the jindosdk.tar.gz or locate the Jindo SDK directory on the cluster, and then enter its lib directory and put ",(0,t.jsx)(n.code,{children:"jindo-core.jar, jindo-sdk.jar"})," to both ",(0,t.jsx)(n.code,{children:"${DORIS_HOME}/fe/lib"})," and ",(0,t.jsx)(n.code,{children:"${DORIS_HOME}/be/lib/java_extensions/preload-extensions"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Create DLF Catalog, set ",(0,t.jsx)(n.code,{children:"oss.hdfs.enabled"})," as ",(0,t.jsx)(n.code,{children:"true"}),"\uFF1A"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:'CREATE CATALOG dlf_oss_hdfs PROPERTIES (\n   "type"="hms",\n   "hive.metastore.type" = "dlf",\n   "dlf.proxy.mode" = "DLF_ONLY",\n   "dlf.endpoint" = "datalake-vpc.cn-beijing.aliyuncs.com",\n   "dlf.region" = "cn-beijing",\n   "dlf.uid" = "uid",\n   "dlf.catalog.id" = "catalog_id", //optional\n   "dlf.access_key" = "ak",\n   "dlf.secret_key" = "sk",\n   "oss.hdfs.enabled" = "true"\n);\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["When the Jindo SDK version is inconsistent with the version used on the EMR cluster, will reported ",(0,t.jsx)(n.code,{children:"Plugin not found"})," and the Jindo SDK  needs to be replaced with the corresponding version."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"dlf-iceberg-catalog",children:"DLF Iceberg Catalog"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:'CREATE CATALOG dlf_iceberg PROPERTIES (\n   "type"="iceberg",\n   "iceberg.catalog.type" = "dlf",\n   "dlf.proxy.mode" = "DLF_ONLY",\n   "dlf.endpoint" = "datalake-vpc.cn-beijing.aliyuncs.com",\n   "dlf.region" = "cn-beijing",\n   "dlf.uid" = "uid",\n   "dlf.catalog.id" = "catalog_id", //optional\n   "dlf.access_key" = "ak",\n   "dlf.secret_key" = "sk"\n);\n'})}),"\n",(0,t.jsx)(n.h2,{id:"column-type-mapping",children:"Column type mapping"}),"\n",(0,t.jsxs)(n.p,{children:["Consistent with Hive Catalog, please refer to the ",(0,t.jsx)(n.strong,{children:"column type mapping"})," section in ",(0,t.jsx)(n.a,{href:"/docs/dev/lakehouse/datalake-analytics/hive",children:"Hive Catalog"}),"."]})]})}function h(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(r,{...e})}):r(e)}},250065:function(e,n,a){a.d(n,{Z:function(){return d},a:function(){return i}});var l=a(667294);let t={},s=l.createContext(t);function i(e){let n=l.useContext(s);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),l.createElement(s.Provider,{value:n},e.children)}}}]);