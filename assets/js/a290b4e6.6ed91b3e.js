"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["275807"],{311902:function(e,n,i){i.r(n),i.d(n,{metadata:()=>r,contentTitle:()=>a,default:()=>h,assets:()=>o,toc:()=>c,frontMatter:()=>l});var r=JSON.parse('{"id":"install/source-install/compilation-mac","title":"Compilation on macOS","description":"\x3c!--","source":"@site/versioned_docs/version-1.2/install/source-install/compilation-mac.md","sourceDirName":"install/source-install","slug":"/install/source-install/compilation-mac","permalink":"/docs/1.2/install/source-install/compilation-mac","draft":false,"unlisted":false,"tags":[],"version":"1.2","frontMatter":{"title":"Compilation on macOS","language":"en"},"sidebar":"docs","previous":{"title":"Compilation on Windows","permalink":"/docs/1.2/install/source-install/compilation-win"},"next":{"title":"Data Model","permalink":"/docs/1.2/data-table/data-model"}}'),t=i("785893"),s=i("250065");let l={title:"Compilation on macOS",language:"en"},a="Compile With macOS",o={},c=[{value:"Environment Requirements",id:"environment-requirements",level:2},{value:"Steps",id:"steps",level:2},{value:"Third-Party Libraries",id:"third-party-libraries",level:2},{value:"Start-up",id:"start-up",level:2},{value:"FAQ",id:"faq",level:2},{value:"Java Version",id:"java-version",level:3}];function d(e){let n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"compile-with-macos",children:"Compile With macOS"})}),"\n",(0,t.jsx)(n.p,{children:"This topic is about how to compile Doris from source with macOS (both x86_64 and arm64)."}),"\n",(0,t.jsx)(n.h2,{id:"environment-requirements",children:"Environment Requirements"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["macOS 12 (Monterey) or newer\uFF08",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"both Intel chip and Apple Silicon chips are supported"})}),"\uFF09"]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://brew.sh/",children:"Homebrew"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"steps",children:"Steps"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.a,{href:"https://brew.sh/",children:"Homebrew"})," to install dependencies."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"brew install automake autoconf libtool pkg-config texinfo coreutils gnu-getopt \\\n    python@3 cmake ninja ccache bison byacc gettext wget pcre maven llvm@15 openjdk@8 npm\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Compile from source."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"bash build.sh\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"third-party-libraries",children:"Third-Party Libraries"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.a,{href:"https://github.com/apache/doris-thirdparty/releases/tag/automation",children:"Apache Doris Third Party Prebuilt"})," page contains the source code of all third-party libraries. You can download ",(0,t.jsx)(n.a,{href:"https://github.com/apache/doris-thirdparty/releases/download/automation/doris-thirdparty-source.tgz",children:"doris-thirdparty-source.tgz"})," to obtain them."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["You can download the ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"precompiled"})})," third party library from the ",(0,t.jsx)(n.a,{href:"https://github.com/apache/doris-thirdparty/releases/tag/automation",children:"Apache Doris Third Party Prebuilt"})," page. You may refer to the following commands:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"cd thirdparty\nrm -rf installed\n\n# Intel chips\ncurl -L https://github.com/apache/doris-thirdparty/releases/download/automation/doris-thirdparty-prebuilt-darwin-x86_64.tar.xz \\\n    -o - | tar -Jxf -\n\n# Apple Silicon chips\ncurl -L https://github.com/apache/doris-thirdparty/releases/download/automation/doris-thirdparty-prebuilt-darwin-arm64.tar.xz \\\n    -o - | tar -Jxf -\n\n# Make sure that protoc and thrift can run successfully.\ncd installed/bin\n\n./protoc --version\n./thrift --version\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["When running ",(0,t.jsx)(n.code,{children:"protoc"})," or ",(0,t.jsx)(n.code,{children:"thrift"}),", you may meet an error which says ",(0,t.jsx)(n.strong,{children:"the app can not be opened because the developer cannot be verified"}),". Go to ",(0,t.jsx)(n.code,{children:"Security & Privacy"}),". Click the ",(0,t.jsx)(n.code,{children:"Open Anyway"})," button in the ",(0,t.jsx)(n.code,{children:"General"})," pane to confirm your intent to open the app. See ",(0,t.jsx)(n.a,{href:"https://support.apple.com/en-us/HT202491",children:"https://support.apple.com/en-us/HT202491"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"start-up",children:"Start-up"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Set ",(0,t.jsx)(n.code,{children:"file descriptors"})," \uFF08",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"NOTICE: If you have closed the current session, you need to set this variable again"})}),"\uFF09\u3002"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"ulimit -n 65536\n"})}),"\n",(0,t.jsx)(n.p,{children:"You can also write this configuration into the initialization files so you don't need to set the variables again when opening a new terminal session."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"# bash\necho 'ulimit -n 65536' >>~/.bashrc\n\n# zsh\necho 'ulimit -n 65536' >>~/.zshrc\n"})}),"\n",(0,t.jsx)(n.p,{children:"Check if the configuration works by executing the following command."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"$ ulimit -n\n65536\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Start BE up"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"cd output/be/bin\n./start_be.sh --daemon\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Start FE up"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"cd output/fe/bin\n./start_fe.sh --daemon\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,t.jsxs)(n.p,{children:["Fail to start BE up. The log shows: ",(0,t.jsx)(n.code,{children:"fail to open StorageEngine, res=file descriptors limit is too small"})]}),"\n",(0,t.jsxs)(n.p,{children:['To fix this, please refer to the "Start-up" section above and reset  ',(0,t.jsx)(n.code,{children:"file descriptors"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"java-version",children:"Java Version"}),"\n",(0,t.jsx)(n.p,{children:"Java 8 is recommended."})]})}function h(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},250065:function(e,n,i){i.d(n,{Z:function(){return a},a:function(){return l}});var r=i(667294);let t={},s=r.createContext(t);function l(e){let n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);