"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["771431"],{688603:function(e,n,a){a.r(n),a.d(n,{metadata:()=>t,contentTitle:()=>c,default:()=>h,assets:()=>s,toc:()=>r,frontMatter:()=>i});var t=JSON.parse('{"id":"lakehouse/multi-catalog/dlf","title":"Alibaba Cloud DLF","description":"\x3c!--","source":"@site/versioned_docs/version-1.2/lakehouse/multi-catalog/dlf.md","sourceDirName":"lakehouse/multi-catalog","slug":"/lakehouse/multi-catalog/dlf","permalink":"/docs/1.2/lakehouse/multi-catalog/dlf","draft":false,"unlisted":false,"tags":[],"version":"1.2","frontMatter":{"title":"Alibaba Cloud DLF","language":"en"},"sidebar":"docs","previous":{"title":"JDBC","permalink":"/docs/1.2/lakehouse/multi-catalog/jdbc"},"next":{"title":"FAQ","permalink":"/docs/1.2/lakehouse/multi-catalog/faq"}}'),l=a("785893"),o=a("250065");let i={title:"Alibaba Cloud DLF",language:"en"},c="Alibaba Cloud DLF",s={},r=[{value:"Connect to DLF",id:"connect-to-dlf",level:2},{value:"The First Way, Create a Hive Catalog.",id:"the-first-way-create-a-hive-catalog",level:3},{value:"The Second Way, Configure the Hive Conf",id:"the-second-way-configure-the-hive-conf",level:3}];function d(e){let n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"alibaba-cloud-dlf",children:"Alibaba Cloud DLF"})}),"\n",(0,l.jsx)(n.p,{children:"Data Lake Formation (DLF) is the unified metadata management service of Alibaba Cloud. It is compatible with the Hive Metastore protocol."}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://www.alibabacloud.com/product/datalake-formation",children:"What is DLF"})}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Doris can access DLF the same way as it accesses Hive Metastore."}),"\n",(0,l.jsx)(n.h2,{id:"connect-to-dlf",children:"Connect to DLF"}),"\n",(0,l.jsx)(n.h3,{id:"the-first-way-create-a-hive-catalog",children:"The First Way, Create a Hive Catalog."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:'CREATE CATALOG hive_with_dlf PROPERTIES (\n   "type"="hms",\n   "dlf.catalog.proxyMode" = "DLF_ONLY",\n   "hive.metastore.type" = "dlf",\n   "dlf.catalog.endpoint" = "dlf.cn-beijing.aliyuncs.com",\n   "dlf.catalog.region" = "cn-beijing",\n   "dlf.catalog.uid" = "uid",\n   "dlf.catalog.accessKeyId" = "ak",\n   "dlf.catalog.accessKeySecret" = "sk"\n);\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"type"})," should always be ",(0,l.jsx)(n.code,{children:"hms"}),". If you need to access Alibaba Cloud OSS on the public network, can add ",(0,l.jsx)(n.code,{children:'"dlf.catalog.accessPublic"="true"'}),"."]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"dlf.catalog.endpoint"}),": DLF Endpoint. See ",(0,l.jsx)(n.a,{href:"https://www.alibabacloud.com/help/en/data-lake-formation/latest/regions-and-endpoints",children:"Regions and Endpoints of DLF"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"dlf.catalog.region"}),": DLF Region. See ",(0,l.jsx)(n.a,{href:"https://www.alibabacloud.com/help/en/data-lake-formation/latest/regions-and-endpoints",children:"Regions and Endpoints of DLF"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"dlf.catalog.uid"}),': Alibaba Cloud account. You can find the "Account ID" in the upper right corner on the Alibaba Cloud console.']}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"dlf.catalog.accessKeyId"}),"\uFF1AAccessKey, which you can create and manage on the ",(0,l.jsx)(n.a,{href:"https://ram.console.aliyun.com/manage/ak",children:"Alibaba Cloud console"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"dlf.catalog.accessKeySecret"}),"\uFF1ASecretKey, which you can create and manage on the ",(0,l.jsx)(n.a,{href:"https://ram.console.aliyun.com/manage/ak",children:"Alibaba Cloud console"}),"."]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Other configuration items are fixed and require no modifications."}),"\n",(0,l.jsx)(n.p,{children:"After the above steps, you can access metadata in DLF the same way as you access Hive MetaStore."}),"\n",(0,l.jsx)(n.p,{children:"Doris supports accessing Hive/Iceberg/Hudi metadata in DLF."}),"\n",(0,l.jsx)(n.h3,{id:"the-second-way-configure-the-hive-conf",children:"The Second Way, Configure the Hive Conf"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Create the ",(0,l.jsx)(n.code,{children:"hive-site.xml"})," file, and put it in the ",(0,l.jsx)(n.code,{children:"fe/conf"}),"  directory."]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:'<?xml version="1.0"?>\n<configuration>\n    \x3c!--Set to use dlf client--\x3e\n    <property>\n        <name>hive.metastore.type</name>\n        <value>dlf</value>\n    </property>\n    <property>\n        <name>dlf.catalog.endpoint</name>\n        <value>dlf-vpc.cn-beijing.aliyuncs.com</value>\n    </property>\n    <property>\n        <name>dlf.catalog.region</name>\n        <value>cn-beijing</value>\n    </property>\n    <property>\n        <name>dlf.catalog.proxyMode</name>\n        <value>DLF_ONLY</value>\n    </property>\n    <property>\n        <name>dlf.catalog.uid</name>\n        <value>20000000000000000</value>\n    </property>\n    <property>\n        <name>dlf.catalog.accessKeyId</name>\n        <value>XXXXXXXXXXXXXXX</value>\n    </property>\n    <property>\n        <name>dlf.catalog.accessKeySecret</name>\n        <value>XXXXXXXXXXXXXXXXX</value>\n    </property>\n</configuration>\n'})}),"\n",(0,l.jsxs)(n.ol,{start:"2",children:["\n",(0,l.jsxs)(n.li,{children:["Restart FE, Doris will read and parse ",(0,l.jsx)(n.code,{children:"fe/conf/hive-site.xml"}),". And then Create Catalog via the ",(0,l.jsx)(n.code,{children:"CREATE CATALOG"})," statement."]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:'CREATE CATALOG hive_with_dlf PROPERTIES (\n    "type"="hms",\n    "hive.metastore.uris" = "thrift://127.0.0.1:9083"\n)\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"type"})," should always be ",(0,l.jsx)(n.code,{children:"hms"}),"; while ",(0,l.jsx)(n.code,{children:"hive.metastore.uris"})," can be arbitary since it is not used in real practice, but it should follow the format of Hive Metastore Thrift URI."]})]})}function h(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},250065:function(e,n,a){a.d(n,{Z:function(){return c},a:function(){return i}});var t=a(667294);let l={},o=t.createContext(l);function i(e){let n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);