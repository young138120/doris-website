"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["715291"],{594500:function(e,n,t){t.r(n),t.d(n,{metadata:()=>a,contentTitle:()=>r,default:()=>h,assets:()=>o,toc:()=>d,frontMatter:()=>i});var a=JSON.parse('{"id":"sql-manual/sql-statements/data-modification/load-and-export/CREATE-SYNC-JOB","title":"CREATE SYNC JOB","description":"\x3c!--","source":"@site/versioned_docs/version-3.0/sql-manual/sql-statements/data-modification/load-and-export/CREATE-SYNC-JOB.md","sourceDirName":"sql-manual/sql-statements/data-modification/load-and-export","slug":"/sql-manual/sql-statements/data-modification/load-and-export/CREATE-SYNC-JOB","permalink":"/docs/3.0/sql-manual/sql-statements/data-modification/load-and-export/CREATE-SYNC-JOB","draft":false,"unlisted":false,"tags":[],"version":"3.0","frontMatter":{"title":"CREATE SYNC JOB","language":"en"},"sidebar":"docs","previous":{"title":"SHOW CREATE ROUTINE LOAD","permalink":"/docs/3.0/sql-manual/sql-statements/data-modification/load-and-export/SHOW-CREATE-ROUTINE-LOAD"},"next":{"title":"PAUSE SYNC JOB","permalink":"/docs/3.0/sql-manual/sql-statements/data-modification/load-and-export/PAUSE-SYNC-JOB"}}'),s=t("785893"),l=t("250065");let i={title:"CREATE SYNC JOB",language:"en"},r=void 0,o={},d=[{value:"Description",id:"description",level:2},{value:"Example",id:"example",level:2},{value:"Keywords",id:"keywords",level:2},{value:"Best Practice",id:"best-practice",level:2}];function c(e){let n={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,l.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,s.jsx)(n.p,{children:"The data synchronization (Sync Job) function supports users to submit a resident data synchronization job, and incrementally synchronizes the CDC (Change Data Capture) of the user's data update operation in the Mysql database by reading the Binlog log from the specified remote address. Features."}),"\n",(0,s.jsx)(n.p,{children:"Currently, the data synchronization job only supports connecting to Canal, obtaining the parsed Binlog data from the Canal Server and importing it into Doris."}),"\n",(0,s.jsxs)(n.p,{children:["Users can view the data synchronization job status through ",(0,s.jsx)(n.a,{href:"../../../../sql-manual/sql-statements/data-modification/load-and-export/SHOW-SYNC-JOB",children:"SHOW SYNC JOB"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"grammar:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"CREATE SYNC [db.]job_name\n (\n channel_desc,\n channel_desc\n ...\n )\nbinlog_desc\n"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"job_name"})}),"\n",(0,s.jsxs)(n.p,{children:["The synchronization job name is the unique identifier of the job in the current database. Only one job with the same ",(0,s.jsx)(n.code,{children:"job_name"})," can be running."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"channel_desc"})}),"\n",(0,s.jsx)(n.p,{children:"The data channel under the job is used to describe the mapping relationship between the mysql source table and the doris target table."}),"\n",(0,s.jsx)(n.p,{children:"grammar:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"FROM mysql_db.src_tbl INTO des_tbl\n[columns_mapping]\n"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"mysql_db.src_tbl"})}),"\n",(0,s.jsx)(n.p,{children:"Specify the database and source table on the mysql side."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"des_tbl"})}),"\n",(0,s.jsx)(n.p,{children:"Specify the target table on the doris side. Only unique tables are supported, and the batch delete function of the table needs to be enabled (see the 'batch delete function' of help alter table for how to enable it)."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"column_mapping"})}),"\n",(0,s.jsx)(n.p,{children:"Specifies the mapping relationship between the columns of the mysql source table and the doris target table. If not specified, FE will default the columns of the source table and the target table to one-to-one correspondence in order."}),"\n",(0,s.jsx)(n.p,{children:"The form col_name = expr is not supported for columns."}),"\n",(0,s.jsx)(n.p,{children:"Example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Suppose the target table column is (k1, k2, v1),\n\nChange the order of columns k1 and k2\n(k2, k1, v1)\n\nIgnore the fourth column of the source data\n(k2, k1, v1, dummy_column)\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"binlog_desc"})}),"\n",(0,s.jsx)(n.p,{children:"Used to describe the remote data source, currently only one canal is supported."}),"\n",(0,s.jsx)(n.p,{children:"grammar:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'FROM BINLOG\n(\n    "key1" = "value1",\n    "key2" = "value2"\n)\n'})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["The properties corresponding to the Canal data source, prefixed with ",(0,s.jsx)(n.code,{children:"canal."})]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"canal.server.ip: address of canal server"}),"\n",(0,s.jsx)(n.li,{children:"canal.server.port: the port of the canal server"}),"\n",(0,s.jsx)(n.li,{children:"canal.destination: the identity of the instance"}),"\n",(0,s.jsx)(n.li,{children:"canal.batchSize: The maximum batch size obtained, the default is 8192"}),"\n",(0,s.jsx)(n.li,{children:"canal.username: username of instance"}),"\n",(0,s.jsx)(n.li,{children:"canal.password: the password of the instance"}),"\n",(0,s.jsx)(n.li,{children:"canal.debug: optional, when set to true, the batch and details of each row of data will be printed out"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Simply create a data synchronization job named ",(0,s.jsx)(n.code,{children:"job1"})," for ",(0,s.jsx)(n.code,{children:"test_tbl"})," of ",(0,s.jsx)(n.code,{children:"test_db"}),", connect to the local Canal server, corresponding to the Mysql source table ",(0,s.jsx)(n.code,{children:"mysql_db1.tbl1"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-SQL",children:'CREATE SYNC `test_db`.`job1`\n(\nFROM `mysql_db1`.`tbl1` INTO `test_tbl`\n)\nFROM BINLOG\n(\n"type" = "canal",\n"canal.server.ip" = "127.0.0.1",\n"canal.server.port" = "11111",\n"canal.destination" = "example",\n"canal.username" = "",\n"canal.password" = ""\n);\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Create a data synchronization job named ",(0,s.jsx)(n.code,{children:"job1"})," for multiple tables of ",(0,s.jsx)(n.code,{children:"test_db"}),", corresponding to multiple Mysql source tables one-to-one, and explicitly specify the column mapping."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-SQL",children:'CREATE SYNC `test_db`.`job1`\n(\nFROM `mysql_db`.`t1` INTO `test1` (k1, k2, v1) ,\nFROM `mysql_db`.`t2` INTO `test2` (k3, k4, v2) \n)\nFROM BINLOG\n(\n"type" = "canal",\n"canal.server.ip" = "xx.xxx.xxx.xx",\n"canal.server.port" = "12111",\n"canal.destination" = "example",\n"canal.username" = "username",\n"canal.password" = "password"\n);\n'})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"keywords",children:"Keywords"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"CREATE, SYNC, JOB\n"})}),"\n",(0,s.jsx)(n.h2,{id:"best-practice",children:"Best Practice"})]})}function h(e={}){let{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},250065:function(e,n,t){t.d(n,{Z:function(){return r},a:function(){return i}});var a=t(667294);let s={},l=a.createContext(s);function i(e){let n=a.useContext(l);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(l.Provider,{value:n},e.children)}}}]);